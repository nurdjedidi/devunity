import{V,b as R}from"./dvJ2J78E.js";import{p as P,I,Y as f,y as o,Z as E,a1 as y,H as L,aR as N,m as k,ai as x,aK as M,ci as U,aP as z,n as w,A as C,b as F,B as Y,aN as q,aQ as K}from"./CaL5DcWf.js";const O=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Q(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:v}=b;let d=0,s=0;const e=I(null),u=f(0),r=f(0),h=f(0),p=f(!1),n=f(!1),c=o(()=>Number(l.scrollThreshold)),H=o(()=>E((c.value-u.value)/c.value||0)),m=()=>{const t=e.value;if(!t||v&&!v.value)return;d=u.value,u.value="window"in t?t.pageYOffset:t.scrollTop;const i=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(s!==i){s=i;return}n.value=u.value<d,h.value=Math.abs(u.value-c.value)};return y(n,()=>{r.value=r.value||u.value}),y(p,()=>{r.value=0}),L(()=>{y(()=>l.scrollTarget,t=>{var S;const i=t?document.querySelector(t):window;i&&i!==e.value&&((S=e.value)==null||S.removeEventListener("scroll",m),e.value=i,e.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),N(()=>{var t;(t=e.value)==null||t.removeEventListener("scroll",m)}),v&&y(v,m,{immediate:!0}),{scrollThreshold:c,currentScroll:u,currentThreshold:h,isScrollActive:p,scrollRatio:H,isScrollingUp:n,savedScroll:r}}const W=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:l=>["top","bottom"].includes(l)},...R(),...q(),...O(),height:{type:[Number,String],default:64}},"VAppBar"),D=k()({name:"VAppBar",props:W(),emits:{"update:modelValue":l=>!0},setup(l,b){let{slots:v}=b;const d=I(),s=x(l,"modelValue"),e=o(()=>{var g;const a=new Set(((g=l.scrollBehavior)==null?void 0:g.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),u=o(()=>{const a=e.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!s.value}),{currentScroll:r,scrollThreshold:h,isScrollingUp:p,scrollRatio:n}=Q(l,{canScroll:u}),c=o(()=>e.value.hide||e.value.fullyHide),H=o(()=>l.collapse||e.value.collapse&&(e.value.inverted?n.value>0:n.value===0)),m=o(()=>l.flat||e.value.fullyHide&&!s.value||e.value.elevate&&(e.value.inverted?r.value>0:r.value===0)),t=o(()=>e.value.fadeImage?e.value.inverted?1-n.value:n.value:void 0),i=o(()=>{var B,T;if(e.value.hide&&e.value.inverted)return 0;const a=((B=d.value)==null?void 0:B.contentHeight)??0,g=((T=d.value)==null?void 0:T.extensionHeight)??0;return c.value?r.value<h.value||e.value.fullyHide?a+g:a:a+g});M(o(()=>!!l.scrollBehavior),()=>{K(()=>{c.value?e.value.inverted?s.value=r.value>h.value:s.value=p.value||r.value<h.value:s.value=!0})});const{ssrBootStyles:S}=U(),{layoutItemStyles:A}=z({id:l.name,order:o(()=>parseInt(l.order,10)),position:w(l,"location"),layoutSize:i,elementSize:f(void 0),active:s,absolute:w(l,"absolute")});return C(()=>{const a=V.filterProps(l);return F(V,Y({ref:d,class:["v-app-bar",{"v-app-bar--bottom":l.location==="bottom"},l.class],style:[{...A.value,"--v-toolbar-image-opacity":t.value,height:void 0,...S.value},l.style]},a,{collapse:H.value,flat:m.value}),v)}),{}}});export{D as V};
