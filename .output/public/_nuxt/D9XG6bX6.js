import{_ as ue}from"./B71tdAEm.js";import{e as me,G as pe,I as f,y as E,H as fe,f as _,w as t,l as ve,o as y,b as l,d as s,i as u,a as d,c as I,J as R,F as B,r as M,h as U,aC as F,aw as q,K as L,t as p,L as T,k as G,V as b,j as H,at as A,g as V,av as Y,as as oe,an as se,_ as ce}from"./CaL5DcWf.js";import{S as Ve}from"./Do3WzYPk.js";import{u as ge}from"./61L_5zm4.js";import{V as ye}from"./CHFqc21c.js";import{V as we}from"./hc3dmJ37.js";import{V as be,a as J}from"./CpY7VV00.js";import{V as xe,a as K}from"./v1DDmFXP.js";import{V as h}from"./DN7PZOHx.js";import{V as N}from"./BSz84BLr.js";import{V as C,a as g}from"./D9cfhuwM.js";import{V as Q}from"./CkVm5wB_.js";import{V as O}from"./DwI9VqCk.js";import{V as ke,a as Se}from"./dvJ2J78E.js";import{V as _e}from"./BWlrflAk.js";import{V as Ce}from"./CPhLSrsE.js";import{V as Fe}from"./D1TOXCzN.js";import"./5AmwwOYV.js";const je={class:"d-flex align-center mb-4"},De={class:"text-body-1 mb-2"},Ue={class:"d-flex align-center text-grey"},Te={class:"text-caption"},Ae={class:"d-flex align-center mb-4"},$e={class:"text-body-1 mb-2"},Le={class:"d-flex align-center text-grey"},he={class:"text-caption"},Ne={class:"d-flex align-center mb-4"},Pe={class:"text-body-1 mb-2"},We={class:"d-flex align-center text-grey"},ze={class:"text-caption"},Ee={class:"d-flex gap-4"},Ie=me({__name:"snippets",setup(Re){ge({title:"Snippets",meta:[{name:"description",content:"Deploy and use numerous snippets across the world"},{name:"robots",content:"index,follow"},{name:"author",content:"DevUnity"},{name:"keywords",content:"snippets, code snippets, code, snippets, deploy, use, across, world"},{name:"viewport",content:"width=device-width, initial-scale=1.0"},{name:"og:title",content:"Snippets"},{name:"og:description",content:"Deploy and use numerous snippets across the world"},{name:"og:image",content:"/logo/devunity-title.png"}]});const n=pe(),$=f("World"),j=f(!1);f(!1);const v=f(""),c=f("All"),P=f(!1),x=f(!1),k=f(""),S=f("success"),re=f("mdi-check-circle"),D=f(!1),W=f(null),i=f({publishWorld:"",publishPersonal:"",title:"",description:"",username:"",framework:"",img:"",imgFile:null,date:"",like:0,favoris:0,isFavorite:!1}),X=E(()=>{let o=n.worldSnippets?n.worldSnippets.slice(0,30):[];if(v.value){const e=v.value.toLowerCase();o=o.filter(m=>{var a,r;return(((a=m.title)==null?void 0:a.toLowerCase())||"").includes(e)||(((r=m.description)==null?void 0:r.toLowerCase())||"").includes(e)})}return c.value!=="All"&&(o=o.filter(e=>e.framework===c.value)),o}),Z=E(()=>{let o=n.personalSnippets?n.personalSnippets.slice(0,30):[];if(v.value){const e=v.value.toLowerCase();o=o.filter(m=>{var a,r;return(((a=m.title)==null?void 0:a.toLowerCase())||"").includes(e)||(((r=m.description)==null?void 0:r.toLowerCase())||"").includes(e)})}return c.value!=="All"&&(o=o.filter(e=>e.framework===c.value)),o}),ee=E(()=>{const o=n.favoritesSnippets.map(r=>r.snippet_id);let e=n.worldSnippets?n.worldSnippets.slice(0,15):[],m=n.personalSnippets?n.personalSnippets.slice(0,15):[];e=e.filter(r=>o.includes(r.id)),m=m.filter(r=>o.includes(r.id));let a=[...e,...m];if(a.forEach(r=>{const w=r;w.isFavorite=!0,e.includes(r)?w.sourceType="world":w.sourceType="personal"}),v.value){const r=v.value.toLowerCase();a=a.filter(w=>{var te,ae;return(((te=w.title)==null?void 0:te.toLowerCase())||"").includes(r)||(((ae=w.description)==null?void 0:ae.toLowerCase())||"").includes(r)})}return c.value!=="All"&&(a=a.filter(r=>r.framework===c.value)),a.slice(0,30)}),ie=async()=>{try{P.value=!0,await n.addSnippets(i.value.title,i.value.description,i.value.framework,i.value.imgFile,i.value.publishWorld,i.value.publishPersonal),await n.loadSnippets(),j.value=!1,i.value={publishWorld:"",publishPersonal:"",title:"",description:"",username:"",framework:"",img:"",imgFile:null,date:"",like:0,favoris:0,isFavorite:!1},k.value="Snippet créé avec succès",S.value="success",x.value=!0}catch(o){console.error("Error adding snippet:",o.message,o.stack),k.value="Erreur lors de la création du snippet",S.value="error",x.value=!0}finally{P.value=!1}},le=async(o,e)=>{o.isFavorite=!o.isFavorite;try{o.isFavorite?(await n.addFavorite(o.id,e),k.value="Ajouté aux favoris"):(await n.removeFavorite(o.id),k.value="Retiré des favoris"),S.value="success",x.value=!0,await n.loadSnippets()}catch(m){console.error("Erreur lors de la mise à jour des favoris:",m),o.isFavorite=!o.isFavorite,k.value="Erreur lors de la mise à jour des favoris",S.value="error",x.value=!0}},ne=o=>{W.value=o,D.value=!0},de=async()=>{try{W.value&&(await n.deleteSnippet(W.value.id,"personal"),D.value=!1,k.value="Snippet supprimé avec succès",S.value="success",x.value=!0)}catch(o){console.error("Error during deletion:",o.message,o.stack),k.value="Erreur lors de la suppression du snippet",S.value="error",x.value=!0}},z=o=>o.snippet_date?n.formatDate(o.snippet_date):o.date?n.formatDate(o.date):"Date non disponible";return fe(async()=>{await n.loadSnippets(),console.log("Snippets chargés avec succès")}),(o,e)=>{const m=ue;return y(),_(ve,null,{default:t(()=>[l(ye,null,{default:t(()=>[l(we,{fluid:""},{default:t(()=>[l(be,{modelValue:$.value,"onUpdate:modelValue":e[0]||(e[0]=a=>$.value=a),color:"primary","align-tabs":"center",class:"mb-6"},{default:t(()=>[l(J,{value:"World",class:"text-subtitle-1"},{default:t(()=>[l(u,{start:""},{default:t(()=>e[20]||(e[20]=[s("mdi-earth")])),_:1}),e[21]||(e[21]=s(" Public Snippets "))]),_:1}),l(J,{value:"Personal",class:"text-subtitle-1"},{default:t(()=>[l(u,{start:""},{default:t(()=>e[22]||(e[22]=[s("mdi-account")])),_:1}),e[23]||(e[23]=s(" My Snippets "))]),_:1}),l(J,{value:"Favorites",class:"text-subtitle-1"},{default:t(()=>[l(u,{start:""},{default:t(()=>e[24]||(e[24]=[s("mdi-star")])),_:1}),e[25]||(e[25]=s(" Favorites "))]),_:1})]),_:1},8,["modelValue"]),l(xe,{modelValue:$.value,"onUpdate:modelValue":e[7]||(e[7]=a=>$.value=a)},{default:t(()=>[l(K,{value:"World"},{default:t(()=>[d("div",je,[l(h,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search snippets",variant:"outlined",density:"comfortable","hide-details":"",class:"mr-4"},null,8,["modelValue"]),l(N,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),items:["All","Vue.js 3","Nuxt 3","React","Angular","Svelte"],label:"Framework",variant:"outlined",density:"comfortable","hide-details":"",style:{"max-width":"200px"}},null,8,["modelValue"])]),l(C,null,{default:t(()=>[(y(!0),I(B,null,M(X.value,(a,r)=>(y(),_(g,{key:r,cols:"12",sm:"6",lg:"4"},{default:t(()=>[l(U,{class:"mx-auto snippet-card","max-width":"400",elevation:"2",hover:""},{default:t(()=>[l(m,{to:`/snippetsView?id=${a.id}&type=world`,class:"text-decoration-none"},{default:t(()=>[l(F,{src:a.img||"/placeholder-image.jpg",height:"200",cover:"",class:"bg-grey-lighten-2"},{placeholder:t(()=>[l(C,{align:"center",justify:"center",class:"fill-height"},{default:t(()=>[l(q,{indeterminate:"",color:"primary"})]),_:1})]),_:2},1032,["src"])]),_:2},1032,["to"]),l(L,{class:"text-h6 font-weight-bold"},{default:t(()=>[s(p(a.title),1)]),_:2},1024),l(T,null,{default:t(()=>[d("p",De,p(a.description),1),l(Q,{color:"primary",variant:"outlined",size:"small",class:"mb-2"},{default:t(()=>[s(p(a.framework),1)]),_:2},1024),d("div",Ue,[l(G,{size:"24",class:"mr-2"},{default:t(()=>[l(F,{src:"https://cdn.vuetifyjs.com/images/john.jpg",alt:"avatar"})]),_:1}),d("span",null,p(a.username),1),l(b),l(u,{size:"small",class:"mr-1"},{default:t(()=>e[26]||(e[26]=[s("mdi-calendar")])),_:1}),d("span",Te,p(z(a)),1)])]),_:2},1024),l(H),l(A,null,{default:t(()=>[l(V,{variant:"text",color:a.isFavorite?"yellow":"",onClick:Y(w=>le(a,"world"),["stop"])},{default:t(()=>[l(u,{icon:a.isFavorite?"mdi-bookmark":"mdi-bookmark-outline"},null,8,["icon"])]),_:2},1032,["color","onClick"]),l(b),l(V,{variant:"text",color:"primary",to:`/snippetsView?id=${a.id}&type=world`},{default:t(()=>[e[28]||(e[28]=s(" View Details ")),l(u,{end:""},{default:t(()=>e[27]||(e[27]=[s("mdi-arrow-right")])),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),X.value.length===0?(y(),_(g,{key:0,cols:"12"},{default:t(()=>[l(O,{type:"info",variant:"tonal"},{default:t(()=>e[29]||(e[29]=[s(" No snippets found. Try modifying your search criteria. ")])),_:1})]),_:1})):R("",!0)]),_:1})]),_:1}),l(K,{value:"Personal"},{default:t(()=>[d("div",Ae,[l(h,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search in my snippets",variant:"outlined",density:"comfortable","hide-details":"",class:"mr-4"},null,8,["modelValue"]),l(N,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=a=>c.value=a),items:["All","Vue.js 3","Nuxt 3","React","Angular","Svelte"],label:"Framework",variant:"outlined",density:"comfortable","hide-details":"",style:{"max-width":"200px"}},null,8,["modelValue"])]),l(C,null,{default:t(()=>[(y(!0),I(B,null,M(Z.value,(a,r)=>(y(),_(g,{key:r,cols:"12",sm:"6",lg:"4"},{default:t(()=>[l(U,{class:"mx-auto snippet-card","max-width":"400",elevation:"2",hover:""},{default:t(()=>[l(m,{to:`/snippetsView?id=${a.id}&type=personal`,class:"text-decoration-none"},{default:t(()=>[l(F,{src:a.img||"/placeholder-image.jpg",height:"200",cover:"",class:"bg-grey-lighten-2"},{placeholder:t(()=>[l(C,{align:"center",justify:"center",class:"fill-height"},{default:t(()=>[l(q,{indeterminate:"",color:"primary"})]),_:1})]),_:2},1032,["src"])]),_:2},1032,["to"]),l(L,{class:"text-h6 font-weight-bold"},{default:t(()=>[s(p(a.title),1)]),_:2},1024),l(T,null,{default:t(()=>[d("p",$e,p(a.description),1),l(Q,{color:"primary",variant:"outlined",size:"small",class:"mb-2"},{default:t(()=>[s(p(a.framework),1)]),_:2},1024),d("div",Le,[l(G,{size:"24",class:"mr-2"},{default:t(()=>[l(F,{src:"https://cdn.vuetifyjs.com/images/john.jpg",alt:"avatar"})]),_:1}),d("span",null,p(a.username),1),l(b),l(u,{size:"small",class:"mr-1"},{default:t(()=>e[30]||(e[30]=[s("mdi-calendar")])),_:1}),d("span",he,p(z(a)),1)])]),_:2},1024),l(H),l(A,null,{default:t(()=>[l(V,{variant:"text",color:"error",onClick:Y(w=>ne(a),["stop"])},{default:t(()=>[l(u,null,{default:t(()=>e[31]||(e[31]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"]),l(b),l(V,{variant:"text",color:"primary",to:`/snippetsView?id=${a.id}&type=personal`},{default:t(()=>[e[33]||(e[33]=s(" View Details ")),l(u,{end:""},{default:t(()=>e[32]||(e[32]=[s("mdi-arrow-right")])),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Z.value.length===0?(y(),_(g,{key:0,cols:"12"},{default:t(()=>[l(O,{type:"info",variant:"tonal"},{default:t(()=>e[34]||(e[34]=[s(" You don't have any snippets yet. Create a new one! ")])),_:1})]),_:1})):R("",!0)]),_:1})]),_:1}),l(K,{value:"Favorites"},{default:t(()=>[d("div",Ne,[l(h,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=a=>v.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search in my favorites",variant:"outlined",density:"comfortable","hide-details":"",class:"mr-4"},null,8,["modelValue"]),l(N,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value=a),items:["All","Vue.js 3","Nuxt 3","React","Angular","Svelte"],label:"Framework",variant:"outlined",density:"comfortable","hide-details":"",style:{"max-width":"200px"}},null,8,["modelValue"])]),l(C,null,{default:t(()=>[(y(!0),I(B,null,M(ee.value,(a,r)=>(y(),_(g,{key:r,cols:"12",sm:"6",lg:"4"},{default:t(()=>[l(U,{class:"mx-auto snippet-card","max-width":"400",elevation:"2",hover:""},{default:t(()=>[l(m,{to:`/snippetsView?id=${a.id}&type=${a.sourceType||"world"}`,class:"text-decoration-none"},{default:t(()=>[l(F,{src:a.img||"/placeholder-image.jpg",height:"200",cover:"",class:"bg-grey-lighten-2"},{placeholder:t(()=>[l(C,{align:"center",justify:"center",class:"fill-height"},{default:t(()=>[l(q,{indeterminate:"",color:"primary"})]),_:1})]),_:2},1032,["src"])]),_:2},1032,["to"]),l(L,{class:"text-h6 font-weight-bold"},{default:t(()=>[s(p(a.title),1)]),_:2},1024),l(T,null,{default:t(()=>[d("p",Pe,p(a.description),1),l(Q,{color:"primary",variant:"outlined",size:"small",class:"mb-2"},{default:t(()=>[s(p(a.framework),1)]),_:2},1024),d("div",We,[l(G,{size:"24",class:"mr-2"},{default:t(()=>[l(F,{src:"https://cdn.vuetifyjs.com/images/john.jpg",alt:"avatar"})]),_:1}),d("span",null,p(a.username),1),l(b),l(u,{size:"small",class:"mr-1"},{default:t(()=>e[35]||(e[35]=[s("mdi-calendar")])),_:1}),d("span",ze,p(z(a)),1)])]),_:2},1024),l(H),l(A,null,{default:t(()=>[l(V,{variant:"text",color:"yellow",onClick:Y(w=>le(a,"world"),["stop"])},{default:t(()=>[l(u,null,{default:t(()=>e[36]||(e[36]=[s("mdi-bookmark")])),_:1})]),_:2},1032,["onClick"]),l(b),l(V,{variant:"text",color:"primary",to:`/snippetsView?id=${a.id}&type=${a.sourceType||"world"}`},{default:t(()=>[e[38]||(e[38]=s(" View Details ")),l(u,{end:""},{default:t(()=>e[37]||(e[37]=[s("mdi-arrow-right")])),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),ee.value.length===0?(y(),_(g,{key:0,cols:"12"},{default:t(()=>[l(O,{type:"info",variant:"tonal"},{default:t(()=>e[39]||(e[39]=[s(" You don't have any favorite snippets yet. ")])),_:1})]),_:1})):R("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(oe,{modelValue:j.value,"onUpdate:modelValue":e[16]||(e[16]=a=>j.value=a),"max-width":"700",persistent:""},{default:t(()=>[l(U,null,{default:t(()=>[l(ke,{color:"primary",class:"text-white"},{default:t(()=>[l(Se,null,{default:t(()=>e[40]||(e[40]=[s("Create a New Snippet")])),_:1}),l(b),l(V,{icon:"",onClick:e[8]||(e[8]=a=>j.value=!1)},{default:t(()=>[l(u,null,{default:t(()=>e[41]||(e[41]=[s("mdi-close")])),_:1})]),_:1})]),_:1}),l(T,{class:"pt-4"},{default:t(()=>[l(_e,null,{default:t(()=>[l(C,null,{default:t(()=>[l(g,{cols:"12"},{default:t(()=>[d("div",Ee,[l(se,{modelValue:i.value.publishWorld,"onUpdate:modelValue":e[9]||(e[9]=a=>i.value.publishWorld=a),label:"Publish Globally",color:"primary","hide-details":""},null,8,["modelValue"]),l(se,{modelValue:i.value.publishPersonal,"onUpdate:modelValue":e[10]||(e[10]=a=>i.value.publishPersonal=a),label:"Save as Personal",color:"primary","hide-details":""},null,8,["modelValue"])])]),_:1}),l(g,{cols:"12"},{default:t(()=>[l(h,{modelValue:i.value.title,"onUpdate:modelValue":e[11]||(e[11]=a=>i.value.title=a),label:"Title",variant:"outlined",placeholder:"Enter snippet title","prepend-inner-icon":"mdi-format-title"},null,8,["modelValue"])]),_:1}),l(g,{cols:"12"},{default:t(()=>[l(Ce,{modelValue:i.value.description,"onUpdate:modelValue":e[12]||(e[12]=a=>i.value.description=a),label:"Description",variant:"outlined",rows:"3",placeholder:"Describe your snippet","prepend-inner-icon":"mdi-text"},null,8,["modelValue"])]),_:1}),l(g,{cols:"12",md:"6"},{default:t(()=>[l(N,{modelValue:i.value.framework,"onUpdate:modelValue":e[13]||(e[13]=a=>i.value.framework=a),items:["React","Vue.js 3","Nuxt 3","Angular","Nest.js"],label:"Framework",variant:"outlined","prepend-inner-icon":"mdi-code-tags"},null,8,["modelValue"])]),_:1}),l(g,{cols:"12",md:"6"},{default:t(()=>[l(Fe,{modelValue:i.value.imgFile,"onUpdate:modelValue":e[14]||(e[14]=a=>i.value.imgFile=a),label:"Cover Image",variant:"outlined","prepend-icon":"mdi-image",accept:"image/*","show-size":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(A,{class:"pa-4"},{default:t(()=>[l(b),l(V,{variant:"outlined",onClick:e[15]||(e[15]=a=>j.value=!1),class:"mr-2"},{default:t(()=>e[42]||(e[42]=[s(" Cancel ")])),_:1}),l(V,{color:"primary",onClick:ie,loading:P.value},{default:t(()=>[e[44]||(e[44]=s(" Create Snippet ")),l(u,{end:""},{default:t(()=>e[43]||(e[43]=[s("mdi-check")])),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:D.value,"onUpdate:modelValue":e[18]||(e[18]=a=>D.value=a),"max-width":"400"},{default:t(()=>[l(U,null,{default:t(()=>[l(L,{class:"bg-error text-white"},{default:t(()=>[l(u,{start:""},{default:t(()=>e[45]||(e[45]=[s("mdi-alert-circle")])),_:1}),e[46]||(e[46]=s(" Confirmation de suppression "))]),_:1}),l(T,{class:"pt-4"},{default:t(()=>e[47]||(e[47]=[d("p",null,"Êtes-vous sûr de vouloir supprimer ce snippet ? Cette action est irréversible.",-1)])),_:1}),l(A,null,{default:t(()=>[l(b),l(V,{variant:"text",onClick:e[17]||(e[17]=a=>D.value=!1)},{default:t(()=>e[48]||(e[48]=[s("Annuler")])),_:1}),l(V,{color:"error",onClick:de},{default:t(()=>[l(u,{start:""},{default:t(()=>e[49]||(e[49]=[s("mdi-delete")])),_:1}),e[50]||(e[50]=s(" Supprimer "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Ve,{modelValue:x.value,"onUpdate:modelValue":e[19]||(e[19]=a=>x.value=a),text:k.value,color:S.value,icon:re.value,timeout:2e3},null,8,["modelValue","text","color","icon"])]),_:1})}}}),rl=ce(Ie,[["__scopeId","data-v-6fc203b4"]]);export{rl as default};
