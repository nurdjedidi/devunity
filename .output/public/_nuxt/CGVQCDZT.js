import{a as T,c as x,b as M,n as oe,V as R,l as j,d as Ie,C as Re,g as Ee,h as le,B as _e,a3 as Ue,u as Pe,_ as $e,ae as Z,f as Oe,i as We,E as Ge,o as Ye}from"./CTpYCmOx.js";import{V as qe}from"./D46G5lEI.js";import{a as _,V as ce}from"./l8m5g3iJ.js";import{V as ee}from"./CmluSudG.js";import{V as ge,a as z}from"./DrJ8FNoe.js";import{V as Xe}from"./SxKDZnYd.js";import{V as H}from"./B2zV2hO7.js";import{V as he}from"./B2XIg-v1.js";import{V as ye,a as L}from"./DJm7jE8E.js";import{V as Je}from"./BPDpAA1j.js";import{a7 as J,p as K,C as te,t as q,z as Ke,u as Q,ax as Qe,k as ne,ay as Ze,az as Ae,aA as et,aB as De,aC as re,aD as He,aE as ae,aF as we,aG as je,b as ve,aH as tt,q as at,aI as ot,o as ke,A as lt,j as nt,ad as rt}from"./BOmTdu30.js";import{s as de,d as y,c as I,w as X,x as be,m as t,R as st,a1 as it,n as dt,h as Ne,a5 as ue,a6 as W,a7 as o,a8 as d,ac as u,al as F,$ as V,a9 as me,aa as Me,F as ze,aj as ct}from"./CoKilWGJ.js";import{V as xe}from"./0OHVjnWc.js";import{V as Ve,m as ut}from"./BRBxEBQi.js";import{a as mt,V as Le}from"./BFhaMN7O.js";import{u as ft}from"./C5XFgQnc.js";import{V as pt}from"./0pmjIYKj.js";import{V as vt}from"./BjfENyHQ.js";import{V as bt}from"./DrsAYoPD.js";import{V as Ce}from"./BJLcRbSt.js";import"./DJrXhb7Z.js";import"./BS-DeQys.js";const Fe={welcome:{id:"welcome",name:"Welcome Email",subject:"Welcome to our newsletter",preheader:"Stay informed with our latest news and updates",headline:"Welcome to our newsletter!",mainContent:`We are delighted to have you as a subscriber. You will now receive our best news and offers directly in your inbox.

Here's what you can expect from our newsletter:
- Regular updates on our products and services
- Exclusive tips and advice
- Special offers reserved for our subscribers`,ctaText:"Discover our services",ctaUrl:"https://example.com",colors:{primary:"#4F46E5",secondary:"#818CF8"},font:"Arial",darkMode:!1,logoUrl:"https://via.placeholder.com/150x50?text=Logo",companyName:"DevUnity",companyAddress:"86000 Poitiers, France"},update:{id:"update",name:"Product Update",subject:"New features available",preheader:"Discover our latest improvements and updates",headline:"Discover our new features!",mainContent:`We are pleased to announce the launch of new features that will improve your user experience.

Here are the main new features:
- Redesigned interface for greater simplicity
- Improved performance for faster loading times
- New customization options

Log in now to discover them!`,ctaText:"Discover the new features",ctaUrl:"https://example.com/updates",colors:{primary:"#0891B2",secondary:"#06B6D4"},font:"Helvetica",darkMode:!1,logoUrl:"https://via.placeholder.com/150x50?text=Logo",companyName:"SaaS Company Inc.",companyAddress:"123 Innovation Street, 75000 Paris, France"},promo:{id:"promo",name:"Special Promotion",subject:"Special offer: 25% off our plans",preheader:"Limited time offer exclusively for our subscribers",headline:"Exclusive offer for our subscribers!",mainContent:`Get 25% off all our premium plans for a limited time.

This offer is reserved for our loyal subscribers and expires in 7 days. Use the promo code NEWSLETTER25 when ordering.`,ctaText:"Take advantage of the offer",ctaUrl:"https://example.com/offer",colors:{primary:"#D97706",secondary:"#F59E0B"},font:"Arial",darkMode:!1,logoUrl:"https://via.placeholder.com/150x50?text=Logo",companyName:"SaaS Company Inc.",companyAddress:"123 Innovation Street, 75000 Paris, France"},newsletter:{id:"newsletter",name:"Monthly Newsletter",subject:"Monthly newsletter - {{month}} {{year}}",preheader:"All the latest news from our company",headline:"This month's news",mainContent:`Dear subscribers,

Here are the main news items this month:

1. Launch of our new real-time collaboration feature
2. Exclusive interview with our development team
3. Tips for optimizing your use of our platform

We thank you for your loyalty and remain open to any suggestions.`,ctaText:"Read the full article",ctaUrl:"https://example.com/blog",colors:{primary:"#7C3AED",secondary:"#8B5CF6"},font:"Georgia",darkMode:!1,logoUrl:"https://via.placeholder.com/150x50?text=Logo",companyName:"SaaS Company Inc.",companyAddress:"123 Innovation Street, 75000 Paris, France"},thankYou:{id:"thankYou",name:"Thank You Email",subject:"Thank you for your subscription",preheader:"We appreciate your support",headline:"Thank you for your subscription!",mainContent:`We wanted to personally thank you for subscribing to our premium plan.

Your support helps us continue to develop and improve our services. You now have access to all premium features, including:

- Advanced analytics
- Priority customer support
- Unlimited storage
- Custom integrations

If you have any questions or need assistance, our support team is here to help.`,ctaText:"Access your account",ctaUrl:"https://example.com/account",colors:{primary:"#059669",secondary:"#10B981"},font:"Tahoma",darkMode:!1,logoUrl:"https://via.placeholder.com/150x50?text=Logo",companyName:"SaaS Company Inc.",companyAddress:"123 Innovation Street, 75000 Paris, France"},event:{id:"event",name:"Event Invitation",subject:"You're invited to our exclusive webinar",preheader:"Join us for an exclusive online event",headline:"Join our exclusive webinar!",mainContent:`We are pleased to invite you to our upcoming webinar on "Future Trends in Technology".

Date: October 15, 2023
Time: 2:00 PM - 3:30 PM (GMT+1)

During this session, our experts will discuss:

- Emerging technologies and their impact
- Industry predictions for the next 5 years
- How to prepare your business for technological changes

Spaces are limited, so reserve your spot now!`,ctaText:"Register now",ctaUrl:"https://example.com/webinar",colors:{primary:"#DC2626",secondary:"#EF4444"},font:"Arial",darkMode:!1,logoUrl:"https://via.placeholder.com/150x50?text=Logo",companyName:"SaaS Company Inc.",companyAddress:"123 Innovation Street, 75000 Paris, France"}};function Se(e){return Fe[e]||null}function gt(e){const r=e.mainContent.split(`

`).filter(i=>i.trim()!=="").map(i=>`<p>${i}</p>`).join("");return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${e.subject}</title>
  <meta name="description" content="${e.preheader}">
  <style>
    body {
      font-family: ${e.font}, sans-serif;
      margin: 0;
      padding: 0;
      background-color: ${e.darkMode?"#1a1a1a":"#f9fafb"};
      color: ${e.darkMode?"#ffffff":"#111827"};
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      background-color: ${e.darkMode?"#2a2a2a":"#ffffff"};
    }
    .header {
      text-align: center;
      padding: 20px 0;
      border-bottom: 2px solid ${e.colors.primary};
    }
    .content {
      padding: 20px 0;
    }
    .button {
      display: inline-block;
      padding: 10px 20px;
      background-color: ${e.colors.primary};
      color: #ffffff;
      text-decoration: none;
      border-radius: 4px;
      margin: 20px 0;
    }
    .footer {
      text-align: center;
      padding: 20px 0;
      font-size: 12px;
      color: #6b7280;
      border-top: 1px solid #e5e7eb;
    }
    @media only screen and (max-width: 600px) {
      .container {
        width: 100% !important;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="${e.logoUrl}" alt="${e.companyName}" style="max-width: 150px;">
      <h1 style="color: ${e.colors.primary};">${e.headline}</h1>
    </div>
    <div class="content">
      ${r}
      <center>
        <a href="${e.ctaUrl}" class="button">${e.ctaText}</a>
      </center>
    </div>
    <div class="footer">
      <p>© ${new Date().getFullYear()} ${e.companyName}. All rights reserved.</p>
      <p>${e.companyAddress}</p>
      <p>To unsubscribe, <a href="#" style="color: ${e.colors.primary};">click here</a>.</p>
    </div>
  </div>
</body>
</html>`}function ht(e){return`${e.subject}
${e.preheader}

${e.headline}

${e.mainContent}

${e.ctaText}: ${e.ctaUrl}

© ${new Date().getFullYear()} ${e.companyName}. All rights reserved.
${e.companyAddress}

To unsubscribe, follow this link: [http://localhost:3000/unsubscribe]`}function yt(e){const r=e.mainContent.split(`

`).filter(i=>i.trim()!=="");return`<template>
  <Head>
    <title>${e.subject}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <Preview>${e.preheader}</Preview>
  </Head>
  <Container>
    <Section>
      <Row>
        <Column>
          <Img src="${e.logoUrl}" alt="${e.companyName}" width="150" />
          <Text :style="{ color: '${e.colors.primary}', fontWeight: 'bold', fontSize: '24px', fontFamily: '${e.font}, sans-serif' }">${e.headline}</Text>
          <Hr :style="{ borderColor: '${e.colors.primary}' }" />
        </Column>
      </Row>
    </Section>
    <Section>
      <Row>
        <Column>
          ${r.map(i=>`<Text>${i}</Text>`).join(`
          `)}
          <Button :style="{ backgroundColor: '${e.colors.primary}', color: 'white', fontFamily: '${e.font}, sans-serif' }" href="${e.ctaUrl}">
            ${e.ctaText}
          </Button>
        </Column>
      </Row>
    </Section>
    <Section>
      <Row>
        <Column>
          <Hr color="#e5e7eb" />
          <Text :style="{ textAlign: 'center', color: '#6b7280', fontSize: '12px', fontFamily: '${e.font}, sans-serif' }">
            © ${new Date().getFullYear()} ${e.companyName}. All rights reserved.
          </Text>
          <Text :style="{ textAlign: 'center', color: '#6b7280', fontSize: '12px', fontFamily: '${e.font}, sans-serif' }">
            ${e.companyAddress}
          </Text>
          <Text :style="{ textAlign: 'center', color: '#6b7280', fontSize: '12px', fontFamily: '${e.font}, sans-serif' }">
            To unsubscribe, <Link href="http://localhost:3000/unsubscribe" :style="{ color: '${e.colors.primary}' }">click here</Link>
          </Text>
        </Column>
      </Row>
    </Section>
  </Container>
</template>`}const wt=K({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...ne()},"VColorPickerCanvas"),kt=J({name:"VColorPickerCanvas",props:wt(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,r){let{emit:i}=r;const m=de(!1),g=y(),c=de(parseFloat(e.width)),p=de(parseFloat(e.height)),w=y({x:0,y:0}),l=I({get:()=>w.value,set(f){if(!g.value)return;const{x:v,y:C}=f;w.value=f,i("update:color",{h:e.color?.h??0,s:te(v,0,c.value)/c.value,v:1-te(C,0,p.value)/p.value,a:e.color?.a??1})}}),k=I(()=>{const{x:f,y:v}=l.value,C=parseInt(e.dotSize,10)/2;return{width:q(e.dotSize),height:q(e.dotSize),transform:`translate(${q(f-C)}, ${q(v-C)})`}}),{resizeRef:E}=Ke(f=>{if(!E.el?.offsetParent)return;const{width:v,height:C}=f[0].contentRect;c.value=v,p.value=C});function U(f,v,C){const{left:D,top:S,width:G,height:h}=C;l.value={x:te(f-D,0,G),y:te(v-S,0,h)}}function P(f){f.type==="mousedown"&&f.preventDefault(),!e.disabled&&($(f),window.addEventListener("mousemove",$),window.addEventListener("mouseup",N),window.addEventListener("touchmove",$),window.addEventListener("touchend",N))}function $(f){if(e.disabled||!g.value)return;m.value=!0;const v=Qe(f);U(v.clientX,v.clientY,g.value.getBoundingClientRect())}function N(){window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",N),window.removeEventListener("touchmove",$),window.removeEventListener("touchend",N)}function A(){if(!g.value)return;const f=g.value,v=f.getContext("2d");if(!v)return;const C=v.createLinearGradient(0,0,f.width,0);C.addColorStop(0,"hsla(0, 0%, 100%, 1)"),C.addColorStop(1,`hsla(${e.color?.h??0}, 100%, 50%, 1)`),v.fillStyle=C,v.fillRect(0,0,f.width,f.height);const D=v.createLinearGradient(0,0,0,f.height);D.addColorStop(0,"hsla(0, 0%, 0%, 0)"),D.addColorStop(1,"hsla(0, 0%, 0%, 1)"),v.fillStyle=D,v.fillRect(0,0,f.width,f.height)}return X(()=>e.color?.h,A,{immediate:!0}),X(()=>[c.value,p.value],(f,v)=>{A(),w.value={x:l.value.x*f[0]/v[0],y:l.value.y*f[1]/v[1]}},{flush:"post"}),X(()=>e.color,()=>{if(m.value){m.value=!1;return}w.value=e.color?{x:e.color.s*c.value,y:(1-e.color.v)*p.value}:{x:0,y:0}},{deep:!0,immediate:!0}),be(()=>A()),Q(()=>t("div",{ref:E,class:["v-color-picker-canvas",e.class],style:e.style,onMousedown:P,onTouchstartPassive:P},[t("canvas",{ref:g,width:c.value,height:p.value},null),e.color&&t("div",{class:["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}],style:k.value},null)])),{}}});function xt(e,r){if(r){const{a:i,...m}=e;return m}return e}function Vt(e,r){if(r==null||typeof r=="string"){const i=Ae(e);return e.a===1?i.slice(0,7):i}if(typeof r=="object"){let i;return ae(r,["r","g","b"])?i=He(e):ae(r,["h","s","l"])?i=De(e):ae(r,["h","s","v"])&&(i=e),xt(i,!ae(r,["a"])&&e.a===1)}return e}const O={h:0,s:0,v:0,a:1},fe={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,r)=>({...e,r:Number(r)})},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,r)=>({...e,g:Number(r)})},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,r)=>({...e,b:Number(r)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:r}=e;return r!=null?Math.round(r*100)/100:1},getColor:(e,r)=>({...e,a:Number(r)})}],to:He,from:re},Ct={...fe,inputs:fe.inputs?.slice(0,3)},pe={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,r)=>({...e,h:Number(r)})},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,r)=>({...e,s:Number(r)})},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,r)=>({...e,l:Number(r)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:r}=e;return r!=null?Math.round(r*100)/100:1},getColor:(e,r)=>({...e,a:Number(r)})}],to:De,from:et},St={...pe,inputs:pe.inputs.slice(0,3)},Be={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,r)=>r}],to:Ae,from:Ze},Tt={...Be,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,r)=>r}]},B={rgb:Ct,rgba:fe,hsl:St,hsla:pe,hex:Tt,hexa:Be},Et=e=>{let{label:r,...i}=e;return t("div",{class:"v-color-picker-edit__input"},[t("input",i,null),t("span",null,[r])])},Ut=K({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(B).includes(e)},modes:{type:Array,default:()=>Object.keys(B),validator:e=>Array.isArray(e)&&e.every(r=>Object.keys(B).includes(r))},...ne()},"VColorPickerEdit"),Pt=J({name:"VColorPickerEdit",props:Ut(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,r){let{emit:i}=r;const m=I(()=>e.modes.map(c=>({...B[c],name:c}))),g=I(()=>{const c=m.value.find(w=>w.name===e.mode);if(!c)return[];const p=e.color?c.to(e.color):null;return c.inputs?.map(w=>{let{getValue:l,getColor:k,...E}=w;return{...c.inputProps,...E,disabled:e.disabled,value:p&&l(p),onChange:U=>{const P=U.target;P&&i("update:color",c.from(k(p??c.to(O),P.value)))}}})});return Q(()=>t("div",{class:["v-color-picker-edit",e.class],style:e.style},[g.value?.map(c=>t(Et,c,null)),m.value.length>1&&t(T,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const c=m.value.findIndex(p=>p.name===e.mode);i("update:mode",m.value[(c+1)%m.value.length].name)}},null)])),{}}}),$t=K({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...ne()},"VColorPickerPreview"),At=J({name:"VColorPickerPreview",props:$t(),emits:{"update:color":e=>!0},setup(e,r){let{emit:i}=r;const m=new AbortController;st(()=>m.abort());async function g(){if(!we)return;const c=new window.EyeDropper;try{const p=await c.open({signal:m.signal}),w=re(ve(p.sRGBHex));i("update:color",{...e.color??O,...w})}catch{}}return Q(()=>t("div",{class:["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class],style:e.style},[we&&t("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[t(T,{onClick:g,icon:"$eyeDropper",variant:"plain",density:"comfortable"},null)]),t("div",{class:"v-color-picker-preview__dot"},[t("div",{style:{background:je(e.color??O)}},null)]),t("div",{class:"v-color-picker-preview__sliders"},[t(xe,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:e.color?.h,"onUpdate:modelValue":c=>i("update:color",{...e.color??O,h:c}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&t(xe,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:e.color?.a??1,"onUpdate:modelValue":c=>i("update:color",{...e.color??O,a:c}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])),{}}}),Dt={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Ht={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},jt={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Nt={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Mt={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},zt={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Lt={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Ft={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Bt={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},It={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Rt={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},_t={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Ot={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Wt={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Gt={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Yt={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},qt={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Xt={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Jt={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Kt={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Qt={red:Dt,pink:Ht,purple:jt,deepPurple:Nt,indigo:Mt,blue:zt,lightBlue:Lt,cyan:Ft,teal:Bt,green:It,lightGreen:Rt,lime:_t,yellow:Ot,amber:Wt,orange:Gt,deepOrange:Yt,brown:qt,blueGrey:Xt,grey:Jt,shades:Kt},Zt=K({swatches:{type:Array,default:()=>ea(Qt)},disabled:Boolean,color:Object,maxHeight:[Number,String],...ne()},"VColorPickerSwatches");function ea(e){return Object.keys(e).map(r=>{const i=e[r];return i.base?[i.base,i.darken4,i.darken3,i.darken2,i.darken1,i.lighten1,i.lighten2,i.lighten3,i.lighten4,i.lighten5]:[i.black,i.white,i.transparent]})}const ta=J({name:"VColorPickerSwatches",props:Zt(),emits:{"update:color":e=>!0},setup(e,r){let{emit:i}=r;return Q(()=>t("div",{class:["v-color-picker-swatches",e.class],style:[{maxHeight:q(e.maxHeight)},e.style]},[t("div",null,[e.swatches.map(m=>t("div",{class:"v-color-picker-swatches__swatch"},[m.map(g=>{const c=ve(g),p=re(c),w=tt(c);return t("div",{class:"v-color-picker-swatches__color",onClick:()=>p&&i("update:color",p)},[t("div",{style:{background:w}},[e.color&&at(e.color,p)?t(x,{size:"x-small",icon:"$success",color:ot(g,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),aa=K({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(B).includes(e)},modes:{type:Array,default:()=>Object.keys(B),validator:e=>Array.isArray(e)&&e.every(r=>Object.keys(B).includes(r))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...rt(ut({width:300}),["height","location","minHeight","maxHeight","minWidth","maxWidth"])},"VColorPicker"),Te=J({name:"VColorPicker",props:aa(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e){const r=ke(e,"mode"),i=y(null),m=ke(e,"modelValue",void 0,l=>{if(l==null||l==="")return null;let k;try{k=re(ve(l))}catch{return null}return k},l=>l?Vt(l,e.modelValue):null),g=I(()=>m.value?{...m.value,h:i.value??m.value.h}:null),{rtlClasses:c}=lt();let p=!0;X(m,l=>{if(!p){p=!0;return}l&&(i.value=l.h)},{immediate:!0});const w=l=>{p=!1,i.value=l.h,m.value=l};return it(()=>{e.modes.includes(r.value)||(r.value=e.modes[0])}),nt({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),Q(()=>{const l=Ve.filterProps(e);return t(Ve,dt({rounded:e.rounded,elevation:e.elevation,theme:e.theme,class:["v-color-picker",c.value,e.class],style:[{"--v-color-picker-color-hsv":je({...g.value??O,a:1})},e.style]},l,{maxWidth:e.width}),{default:()=>[!e.hideCanvas&&t(kt,{key:"canvas",color:g.value,"onUpdate:color":w,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&t("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&t(At,{key:"preview",color:g.value,"onUpdate:color":w,hideAlpha:!r.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&t(Pt,{key:"edit",modes:e.modes,mode:r.value,"onUpdate:mode":k=>r.value=k,color:g.value,"onUpdate:color":w,disabled:e.disabled},null)]),e.showSwatches&&t(ta,{key:"swatches",color:g.value,"onUpdate:color":w,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)]})}),{}}}),oa={class:"d-flex align-center mb-2"},la={class:"d-flex align-center mb-2"},na=["src","alt"],ra={style:{"text-align":"center",margin:"30px 0"}},sa=["href"],ia={class:"code-toolbar d-flex align-center px-4 py-2 bg-grey-darken-3"},da={class:"code-block pa-4 bg-grey-darken-4 text-white overflow-auto",style:{"max-height":"300px",margin:"0"}},ca={class:"code-toolbar d-flex align-center px-4 py-2 bg-grey-darken-3"},ua={class:"code-block pa-4 bg-grey-darken-4 text-white overflow-auto",style:{"max-height":"300px",margin:"0"}},ma={class:"code-toolbar d-flex align-center px-4 py-2 bg-grey-darken-3"},fa={class:"code-block pa-4 bg-grey-darken-4 text-white overflow-auto",style:{"max-height":"300px",margin:"0"}},pa={class:"d-flex align-center"},va=Ne({__name:"email-editor",setup(e){const r=y(null),i=y(null),m=y("desktop"),g=y("preview"),c=y("content"),p=I(()=>Object.values(Fe).map(h=>({title:h.name,value:h.id}))),w=[{title:"Arial",value:"Arial"},{title:"Helvetica",value:"Helvetica"},{title:"Georgia",value:"Georgia"},{title:"Tahoma",value:"Tahoma"},{title:"Verdana",value:"Verdana"}],l=y({id:"custom",name:"Custom Template",subject:"Welcome to our newsletter",template:"welcome",preheader:"Stay informed with our latest news and updates",headline:"Welcome to our newsletter!",mainContent:`We are delighted to have you as a subscriber. You will now receive our best news and offers directly in your inbox.

Here's what you can expect from our newsletter:
- Regular updates on our products and services
- Exclusive tips and advice
- Special offers reserved for our subscribers`,ctaText:"Discover our services",ctaUrl:"https://example.com",colors:{primary:"#4F46E5",secondary:"#818CF8"},font:"Arial",darkMode:!1,logoUrl:"https://via.placeholder.com/150x50?text=Logo",companyName:"SaaS Company Inc.",companyAddress:"123 Innovation Street, 75000 Paris, France"}),k=y({show:!1,text:"",color:"success"}),E=y(""),U=y(""),P=y(""),$=I(()=>l.value.mainContent.split(`

`).filter(h=>h.trim()!=="")),N=()=>{const h=Se(l.value.template);if(h){const a=l.value.template;l.value={...h,template:a},A()}},A=async()=>{try{E.value=gt(l.value),U.value=ht(l.value),P.value=yt(l.value)}catch(h){console.error("Error generating email code:",h),S("Error generating HTML code","error")}},f=()=>{navigator.clipboard.writeText(E.value).then(()=>{S("HTML code copied to clipboard","success")}).catch(h=>{console.error("Error copying:",h),S("Error copying code","error")})},v=()=>{navigator.clipboard.writeText(P.value).then(()=>{S("Vue Email template copied to clipboard","success")}).catch(h=>{console.error("Error copying:",h),S("Error copying template","error")})},C=()=>{navigator.clipboard.writeText(U.value).then(()=>{S("Text copied to clipboard","success")}).catch(h=>{console.error("Error copying:",h),S("Error copying text","error")})},D=async()=>{try{const h=Pe(),a={subject:l.value.subject,html:E.value,text:U.value},n=await h.sendEmail(a);if(n){const s=await n.json();console.log("Réponse du serveur:",s),s.success?S("Email envoyé avec succès","success"):S(`Erreur d'envoi: ${s.message||"Erreur inconnue"}`,"error")}else S("Erreur lors de la connexion au serveur","error")}catch(h){console.error("Erreur détaillée lors de l'envoi:",h),S(`Erreur d'envoi: ${h.message}`,"error")}},S=(h,a)=>{k.value={show:!0,text:h,color:a}};X(()=>l.value,()=>{A()},{deep:!0,immediate:!0}),be(()=>{N(),G()});const G=()=>{const a=new URLSearchParams(window.location.search).get("templateId");if(a){const n=Se(a);n&&(l.value={...n,template:a},A())}};return(h,a)=>(W(),ue(qe,{fluid:"",class:"pa-0 ma-0"},{default:o(()=>[t(ce,{"no-gutters":""},{default:o(()=>[t(_,{cols:"12",md:"4",lg:"3",class:"pa-2"},{default:o(()=>[t(M,{elevation:"2",class:"rounded-lg"},{default:o(()=>[t(oe,{class:"bg-primary text-white py-3 px-4 d-flex align-center"},{default:o(()=>[t(x,{class:"mr-2"},{default:o(()=>a[21]||(a[21]=[d("mdi-email-edit")])),_:1}),a[23]||(a[23]=d(" Email Editor ")),t(R),t(T,{icon:"mdi-send",color:"white",variant:"text",onClick:D,class:"mr-n2"},{default:o(()=>[t(ee,{activator:"parent",location:"bottom"},{default:o(()=>a[22]||(a[22]=[d("Send email")])),_:1})]),_:1})]),_:1}),t(ge,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=n=>c.value=n),"bg-color":"primary","show-arrows":""},{default:o(()=>[t(z,{value:"content",class:"text-caption"},{default:o(()=>[t(x,{size:"small",class:"mr-1"},{default:o(()=>a[24]||(a[24]=[d("mdi-file-document-outline")])),_:1}),a[25]||(a[25]=d(" Content "))]),_:1}),t(z,{value:"style",class:"text-caption"},{default:o(()=>[t(x,{size:"small",class:"mr-1"},{default:o(()=>a[26]||(a[26]=[d("mdi-palette-outline")])),_:1}),a[27]||(a[27]=d(" Style "))]),_:1}),t(z,{value:"company",class:"text-caption"},{default:o(()=>[t(x,{size:"small",class:"mr-1"},{default:o(()=>a[28]||(a[28]=[d("mdi-domain")])),_:1}),a[29]||(a[29]=d(" Company "))]),_:1}),t(z,{value:"actions",class:"text-caption"},{default:o(()=>[t(x,{size:"small",class:"mr-1"},{default:o(()=>a[30]||(a[30]=[d("mdi-cog")])),_:1}),a[31]||(a[31]=d(" Actions "))]),_:1})]),_:1},8,["modelValue"]),t(j,{class:"pa-4"},{default:o(()=>[t(Xe,{ref_key:"form",ref:r},{default:o(()=>[t(H,{modelValue:l.value.subject,"onUpdate:modelValue":a[1]||(a[1]=n=>l.value.subject=n),label:"Email subject",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-format-title",clearable:""},null,8,["modelValue"]),t(he,{modelValue:l.value.template,"onUpdate:modelValue":[a[2]||(a[2]=n=>l.value.template=n),N],items:p.value,label:"Template type",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-file-document-outline"},null,8,["modelValue","items"]),t(Ie,{class:"my-4"}),t(ye,{modelValue:c.value,"onUpdate:modelValue":a[15]||(a[15]=n=>c.value=n)},{default:o(()=>[t(L,{value:"content"},{default:o(()=>[t(H,{modelValue:l.value.preheader,"onUpdate:modelValue":a[3]||(a[3]=n=>l.value.preheader=n),label:"Pre-header",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-text-short",hint:"Text visible in email previews",clearable:""},null,8,["modelValue"]),t(H,{modelValue:l.value.headline,"onUpdate:modelValue":a[4]||(a[4]=n=>l.value.headline=n),label:"Title",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-format-header-1",clearable:""},null,8,["modelValue"]),t(Je,{modelValue:l.value.mainContent,"onUpdate:modelValue":a[5]||(a[5]=n=>l.value.mainContent=n),label:"Main content",variant:"outlined",rows:"6","auto-grow":"",class:"mb-4","prepend-icon":"mdi-text",clearable:""},null,8,["modelValue"]),t(H,{modelValue:l.value.ctaText,"onUpdate:modelValue":a[6]||(a[6]=n=>l.value.ctaText=n),label:"Button text",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-button-cursor",clearable:""},null,8,["modelValue"]),t(H,{modelValue:l.value.ctaUrl,"onUpdate:modelValue":a[7]||(a[7]=n=>l.value.ctaUrl=n),label:"Button URL",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-link",clearable:""},null,8,["modelValue"])]),_:1}),t(L,{value:"style"},{default:o(()=>[u("div",oa,[t(x,{class:"mr-2"},{default:o(()=>a[32]||(a[32]=[d("mdi-palette")])),_:1}),a[33]||(a[33]=u("div",{class:"text-subtitle-1"},"Primary color",-1))]),t(Te,{modelValue:l.value.colors.primary,"onUpdate:modelValue":a[8]||(a[8]=n=>l.value.colors.primary=n),"dot-size":"25",class:"mb-4"},null,8,["modelValue"]),u("div",la,[t(x,{class:"mr-2"},{default:o(()=>a[34]||(a[34]=[d("mdi-palette-outline")])),_:1}),a[35]||(a[35]=u("div",{class:"text-subtitle-1"},"Secondary color",-1))]),t(Te,{modelValue:l.value.colors.secondary,"onUpdate:modelValue":a[9]||(a[9]=n=>l.value.colors.secondary=n),"dot-size":"25",class:"mb-4"},null,8,["modelValue"]),t(he,{modelValue:l.value.font,"onUpdate:modelValue":a[10]||(a[10]=n=>l.value.font=n),items:w,label:"Font family",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-format-font"},null,8,["modelValue"]),t(Re,{modelValue:l.value.darkMode,"onUpdate:modelValue":a[11]||(a[11]=n=>l.value.darkMode=n),color:"primary",label:"Dark mode","hide-details":"",class:"mb-4","prepend-icon":"mdi-theme-light-dark"},null,8,["modelValue"])]),_:1}),t(L,{value:"company"},{default:o(()=>[t(H,{modelValue:l.value.logoUrl,"onUpdate:modelValue":a[12]||(a[12]=n=>l.value.logoUrl=n),label:"Logo URL",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-image"},null,8,["modelValue"]),t(H,{modelValue:l.value.companyName,"onUpdate:modelValue":a[13]||(a[13]=n=>l.value.companyName=n),label:"Company name",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-domain",clearable:""},null,8,["modelValue"]),t(H,{modelValue:l.value.companyAddress,"onUpdate:modelValue":a[14]||(a[14]=n=>l.value.companyAddress=n),label:"Company address",variant:"outlined",density:"comfortable",class:"mb-4","prepend-icon":"mdi-map-marker",clearable:""},null,8,["modelValue"])]),_:1}),t(L,{value:"actions"},{default:o(()=>[t(Ee,null,{default:o(()=>[t(le,{"prepend-icon":"mdi-content-copy",title:"Copy HTML",onClick:f,class:"mb-2"},{append:o(()=>[t(x,null,{default:o(()=>a[36]||(a[36]=[d("mdi-chevron-right")])),_:1})]),_:1}),t(le,{"prepend-icon":"mdi-code-tags",title:"Copy Vue Email",onClick:v,class:"mb-2"},{append:o(()=>[t(x,null,{default:o(()=>a[37]||(a[37]=[d("mdi-chevron-right")])),_:1})]),_:1}),t(le,{"prepend-icon":"mdi-send",title:"Send email",onClick:D,class:"mb-2"},{append:o(()=>[t(x,null,{default:o(()=>a[38]||(a[38]=[d("mdi-chevron-right")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1})]),_:1}),t(_,{cols:"12",md:"8",lg:"9",class:"pa-2"},{default:o(()=>[t(M,{elevation:"2",class:"rounded-lg"},{default:o(()=>[t(mt,{color:"primary",flat:""},{default:o(()=>[t(Le,{class:"text-white"},{default:o(()=>a[39]||(a[39]=[d("Email preview")])),_:1}),t(R),t(_e,{modelValue:m.value,"onUpdate:modelValue":a[16]||(a[16]=n=>m.value=n),color:"white",density:"comfortable",class:"mr-2",mandatory:""},{default:o(()=>[t(T,{value:"desktop",class:"mr-2","prepend-icon":"mdi-monitor"},{default:o(()=>a[40]||(a[40]=[d("Desktop")])),_:1}),t(T,{value:"mobile","prepend-icon":"mdi-cellphone"},{default:o(()=>a[41]||(a[41]=[d("Mobile")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(j,{class:"pa-4"},{default:o(()=>[u("div",{class:ct(["email-preview-container",m.value])},[u("div",{ref_key:"emailPreview",ref:i,class:"email-preview"},[u("div",{class:"email-template",style:F({backgroundColor:l.value.darkMode?"#2a2a2a":"#ffffff",color:l.value.darkMode?"#ffffff":"#111827"})},[u("div",{class:"email-header",style:F(`border-bottom: 2px solid ${l.value.colors.primary}; padding: 20px; text-align: center;`)},[u("img",{src:l.value.logoUrl,alt:l.value.companyName,style:{"max-width":"150px"}},null,8,na),u("h1",{style:F(`color: ${l.value.colors.primary}; font-family: ${l.value.font}, sans-serif; margin-top: 15px;`)},V(l.value.headline),5)],4),u("div",{class:"email-content",style:F(`padding: 30px 20px; font-family: ${l.value.font}, sans-serif;`)},[(W(!0),me(ze,null,Me($.value,(n,s)=>(W(),me("p",{key:s,style:{"margin-bottom":"16px","line-height":"1.5"}},V(n),1))),128)),u("div",ra,[u("a",{href:l.value.ctaUrl,style:F(`display: inline-block; padding: 12px 24px; background-color: ${l.value.colors.primary}; color: white; text-decoration: none; border-radius: 4px; font-weight: bold;`)},V(l.value.ctaText),13,sa)])],4),u("div",{class:"email-footer",style:F(`text-align: center; padding: 20px; border-top: 1px solid ${l.value.darkMode?"#444":"#eee"}; font-size: 12px; color: ${l.value.darkMode?"#aaa":"#666"}; font-family: ${l.value.font}, sans-serif;`)},[u("p",null,"© "+V(new Date().getFullYear())+" "+V(l.value.companyName)+". All rights reserved.",1),u("p",null,V(l.value.companyAddress),1),u("p",null,[a[42]||(a[42]=d("To unsubscribe, ")),u("a",{href:"http://localhost:3000/unsubscribe",style:F(`color: ${l.value.colors.primary}; text-decoration: underline;`)},"click here",4),a[43]||(a[43]=d(". "))])],4)],4)],512)],2),t(M,{class:"mt-4",elevation:"1"},{default:o(()=>[t(ge,{modelValue:g.value,"onUpdate:modelValue":a[17]||(a[17]=n=>g.value=n),"bg-color":"grey-lighten-4"},{default:o(()=>[t(z,{value:"html"},{default:o(()=>[t(x,{size:"small",class:"mr-1"},{default:o(()=>a[44]||(a[44]=[d("mdi-language-html5")])),_:1}),a[45]||(a[45]=d(" HTML "))]),_:1}),t(z,{value:"vueEmail"},{default:o(()=>[t(x,{size:"small",class:"mr-1"},{default:o(()=>a[46]||(a[46]=[d("mdi-vuejs")])),_:1}),a[47]||(a[47]=d(" Vue Email "))]),_:1}),t(z,{value:"text"},{default:o(()=>[t(x,{size:"small",class:"mr-1"},{default:o(()=>a[48]||(a[48]=[d("mdi-text")])),_:1}),a[49]||(a[49]=d(" Text "))]),_:1})]),_:1},8,["modelValue"]),t(ye,{modelValue:g.value,"onUpdate:modelValue":a[18]||(a[18]=n=>g.value=n)},{default:o(()=>[t(L,{value:"html"},{default:o(()=>[t(j,{class:"code-container pa-0"},{default:o(()=>[u("div",ia,[a[51]||(a[51]=u("span",{class:"text-caption text-white"},"HTML Code",-1)),t(R),t(T,{icon:"mdi-content-copy",density:"comfortable",color:"white",variant:"text",onClick:f},{default:o(()=>[t(ee,{activator:"parent",location:"top"},{default:o(()=>a[50]||(a[50]=[d("Copy HTML")])),_:1})]),_:1})]),u("pre",da,[u("code",null,V(E.value),1)])]),_:1})]),_:1}),t(L,{value:"vueEmail"},{default:o(()=>[t(j,{class:"code-container pa-0"},{default:o(()=>[u("div",ca,[a[53]||(a[53]=u("span",{class:"text-caption text-white"},"Vue Email Template",-1)),t(R),t(T,{icon:"mdi-content-copy",density:"comfortable",color:"white",variant:"text",onClick:v},{default:o(()=>[t(ee,{activator:"parent",location:"top"},{default:o(()=>a[52]||(a[52]=[d("Copy template")])),_:1})]),_:1})]),u("pre",ua,[u("code",null,V(P.value),1)])]),_:1})]),_:1}),t(L,{value:"text"},{default:o(()=>[t(j,{class:"code-container pa-0"},{default:o(()=>[u("div",ma,[a[55]||(a[55]=u("span",{class:"text-caption text-white"},"Text Version",-1)),t(R),t(T,{icon:"mdi-content-copy",density:"comfortable",color:"white",variant:"text",onClick:C},{default:o(()=>[t(ee,{activator:"parent",location:"top"},{default:o(()=>a[54]||(a[54]=[d("Copy text")])),_:1})]),_:1})]),u("pre",fa,[u("code",null,V(U.value),1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Ue,{modelValue:k.value.show,"onUpdate:modelValue":a[20]||(a[20]=n=>k.value.show=n),color:k.value.color,timeout:"3000",location:"top"},{actions:o(()=>[t(T,{icon:"mdi-close",variant:"text",onClick:a[19]||(a[19]=n=>k.value.show=!1)})]),default:o(()=>[u("div",pa,[t(x,{class:"mr-2",icon:k.value.color==="success"?"mdi-check-circle":"mdi-alert-circle"},null,8,["icon"]),d(" "+V(k.value.text),1)])]),_:1},8,["modelValue","color"])]),_:1}))}}),ba=$e(va,[["__scopeId","data-v-99b6e9a1"]]),ga={class:"text-h4 font-weight-bold"},ha={class:"text-h4 font-weight-bold"},ya=Ne({__name:"newsletter-admin",setup(e){ft({title:"Newsletter Admin - DevUnity",meta:[{name:"description",content:"Admin dashboard for managing newsletters"},{name:"keywords",content:"DevUnity, newsletter, admin, dashboard, management"},{name:"author",content:"DevUnity"},{name:"robots",content:"noindex, nofollow"},{name:"viewport",content:"width=device-width, initial-scale=1.0"},{name:"og:title",content:"Newsletter Admin - DevUnity"},{name:"og:description",content:"Admin dashboard for managing newsletters"},{name:"og:image",content:"/logo/devunity-title.png"}]});const r=Pe(),i=y(!1),m=y(""),g=y(0),c=y(0),p=y([]),w=y([]),l=y(null),k=y(!1);be(async()=>{await new Promise(n=>setTimeout(n,100)),await E()});const E=async()=>{try{if(console.log(r.token),!r.token&&(r.initializeStore(),!r.isUserAuthenticated)){a("Veuillez vous connecter pour accéder à cette page","error"),Z("/login");return}if(r.user&&r.user.isAdmin===!0){console.log("Admin déjà vérifié dans le store:",r.user),i.value=!0,D(),U(),P();return}const n=await fetch("/api/user/check-admin",{headers:{Authorization:`Bearer ${r.token}`}});if(!n.ok){console.error("Erreur API check-admin:",n.status,n.statusText),r.logout(),a("Session expirée. Veuillez vous reconnecter.","error"),Z("/login");return}const s=await n.json();console.log("Réponse API check-admin:",s),s.isAdmin?(i.value=!0,D(),U(),P()):(a("Vous n'avez pas les permissions nécessaires","error"),Z("/"))}catch(n){console.error("Erreur lors de la vérification de l'authentification:",n),a("Erreur lors de la vérification de l'authentification","error"),Z("/login")}},U=async()=>{try{const s=await(await fetch("/api/newsletter/stats",{headers:{Authorization:`Bearer ${r.token}`}})).json();s.stats&&s.stats.length>0?(w.value=s.stats,l.value=s.stats[0],m.value=w.value[0].name,g.value=w.value[0].subscribers,c.value=w.value[0].emails_sent,console.log("Newsletters chargées:",w.value),console.log("Newsletter actuelle:",l.value)):console.warn("Aucune newsletter trouvée dans les données")}catch(n){console.error("Erreur lors du chargement des statistiques:",n),a("Erreur lors du chargement des statistiques","error")}},P=async()=>{const s=await(await r.getEmailHistory()).json();console.log(s),s&&s.data&&Array.isArray(s.data)&&($.value=s.data.map(b=>({subject:b.subject,date:b.created_at,content:b.content}))),console.log($.value)};y({subject:"",template:"welcome",content:""});const $=y([{subject:"Welcome to our newsletter",date:"2023-10-15",status:"sent",opens:45},{subject:"New features - October 2023",date:"2023-10-01",status:"sent",opens:38},{subject:"Special offer for our subscribers",date:"2023-09-15",status:"sent",opens:42}]),N=y([{title:"Email",key:"email"},{title:"Subscription Date",key:"date"},{title:"Status",key:"status"}]),A=y(""),f=y(!1),v=y({show:!1,text:"",color:"success"}),C=async()=>{try{await r.addNewsletter(m.value),U(),a("Newsletter créé avec succès","success"),k.value=!1}catch(n){console.error("Erreur lors de la création de la newsletter:",n),a("Erreur lors de la création de la newsletter","error")}},D=async()=>{f.value=!0;try{const n=await fetch("/api/newsletter/subscribers",{headers:{Authorization:`Bearer ${r.token}`}});if(!n.ok)throw new Error(`Erreur HTTP ${n.status}: ${n.statusText}`);const s=await n.json();s.subscribers&&Array.isArray(s.subscribers)&&(p.value=s.subscribers.map(b=>({id:b.id,email:b.email,date:b.date||new Date().toISOString(),status:"active"})),l.value&&(l.value.subscribers=p.value.length,g.value=p.value.length))}catch(n){console.error("Erreur lors du chargement des abonnés:",n),a("Erreur lors du chargement des abonnés","error")}finally{f.value=!1}},S=()=>{const s=[["Email","Subscription Date","Status"].join(","),...p.value.map(ie=>[ie.email,new Date(ie.date).toLocaleDateString("en-US"),ie.status].join(","))].join(`
`),b=new Blob([s],{type:"text/csv;charset=utf-8;"}),se=URL.createObjectURL(b),Y=document.createElement("a");Y.href=se,Y.setAttribute("download",`newsletter_subscribers_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),a("CSV export successful","success")},G=n=>new Date(n).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}),h=n=>{switch(n){case"sent":return"success";case"draft":return"info";case"failed":return"error";default:return"grey"}},a=(n,s)=>{v.value={show:!0,text:n,color:s}};return(n,s)=>(W(),ue(Oe,null,{default:o(()=>[t(pt,{flat:"",color:"primary",class:"px-4"},{default:o(()=>[t(x,{size:"large",class:"mr-3"},{default:o(()=>s[6]||(s[6]=[d("mdi-email-newsletter")])),_:1}),t(Le,{class:"text-h5 font-weight-bold"},{default:o(()=>[d(V(m.value),1)]),_:1}),t(R),t(T,{"prepend-icon":"mdi-download",variant:"text",onClick:S},{default:o(()=>s[7]||(s[7]=[d(" Export CSV ")])),_:1}),t(T,{"prepend-icon":"mdi-plus",variant:"text",onClick:s[0]||(s[0]=b=>k.value=!0)},{default:o(()=>s[8]||(s[8]=[d(" Add Newsletter ")])),_:1})]),_:1}),t(vt,{class:"ma-4"},{default:o(()=>[t(ce,null,{default:o(()=>[t(_,{cols:"12",md:"6"},{default:o(()=>[t(M,{class:"rounded-lg",elevation:"2",height:"100%"},{default:o(()=>[t(j,{class:"d-flex flex-column align-center justify-center"},{default:o(()=>[t(x,{size:"48",color:"primary",class:"mb-2"},{default:o(()=>s[9]||(s[9]=[d("mdi-account-group")])),_:1}),u("div",ga,V(g.value),1),s[10]||(s[10]=u("div",{class:"text-subtitle-1 text-medium-emphasis"},"Subscribers",-1))]),_:1})]),_:1})]),_:1}),t(_,{cols:"12",md:"6"},{default:o(()=>[t(M,{class:"rounded-lg",elevation:"2",height:"100%"},{default:o(()=>[t(j,{class:"d-flex flex-column align-center justify-center"},{default:o(()=>[t(x,{size:"48",color:"info",class:"mb-2"},{default:o(()=>s[11]||(s[11]=[d("mdi-email-outline")])),_:1}),u("div",ha,V(c.value),1),s[12]||(s[12]=u("div",{class:"text-subtitle-1 text-medium-emphasis"},"Emails sent",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(ce,{class:"mt-4"},{default:o(()=>[t(_,{cols:"12",md:"8"},{default:o(()=>[t(M,{class:"rounded-lg",elevation:"2"},{default:o(()=>[t(oe,{class:"bg-primary text-white py-3 px-4 rounded-t-lg"},{default:o(()=>[t(x,{color:"white",class:"mr-2"},{default:o(()=>s[13]||(s[13]=[d("mdi-account-group")])),_:1}),s[14]||(s[14]=d(" Subscribers List "))]),_:1}),t(j,{class:"pa-4"},{default:o(()=>[t(H,{modelValue:A.value,"onUpdate:modelValue":s[1]||(s[1]=b=>A.value=b),"prepend-inner-icon":"mdi-magnify",label:"Search subscriber","single-line":"",variant:"outlined",density:"comfortable","hide-details":"",class:"mb-4"},null,8,["modelValue"]),t(bt,{headers:N.value,items:p.value,search:A.value,loading:f.value,class:"elevation-1 rounded"},{"item.status":o(({item:b})=>[t(Ce,{color:b.status==="active"?"success":"error",size:"small"},{default:o(()=>[d(V(b.status==="active"?"Active":"Unsubscribed"),1)]),_:2},1032,["color"])]),"item.date":o(({item:b})=>[d(V(new Date(b.date).toLocaleDateString("en-US")),1)]),_:1},8,["headers","items","search","loading"])]),_:1})]),_:1})]),_:1}),t(_,{cols:"12",md:"4"},{default:o(()=>[t(M,{class:"rounded-lg",elevation:"2"},{default:o(()=>[t(oe,{class:"bg-primary text-white py-3 px-4 rounded-t-lg"},{default:o(()=>[t(x,{color:"white",class:"mr-2"},{default:o(()=>s[15]||(s[15]=[d("mdi-history")])),_:1}),s[16]||(s[16]=d(" Email History "))]),_:1}),t(j,{class:"pa-0"},{default:o(()=>[t(Ee,null,{default:o(()=>[(W(!0),me(ze,null,Me($.value,(b,se)=>(W(),ue(le,{key:se,subtitle:G(b.date),"prepend-icon":"mdi-email-outline"},{append:o(()=>[t(Ce,{size:"x-small",color:h(b.status)},{default:o(()=>[d(V(b.status),1)]),_:2},1032,["color"])]),default:o(()=>[t(We,null,{default:o(()=>[d(V(b.subject),1)]),_:2},1024)]),_:2},1032,["subtitle"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ba)]),_:1}),t(Ge,{modelValue:k.value,"onUpdate:modelValue":s[4]||(s[4]=b=>k.value=b),"max-width":"700"},{default:o(()=>[t(M,null,{default:o(()=>[t(oe,{class:"bg-primary text-white py-3 px-4 rounded-t-lg"},{default:o(()=>s[17]||(s[17]=[d(" Add Newsletter ")])),_:1}),t(j,null,{default:o(()=>[t(H,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=b=>m.value=b),label:"Newsletter Name","prepend-inner-icon":"mdi-email-outline",variant:"outlined",density:"comfortable","hide-details":"",class:"mb-4"},null,8,["modelValue"])]),_:1}),t(Ye,null,{default:o(()=>[t(T,{color:"error",variant:"tonal",onClick:s[3]||(s[3]=b=>k.value=!1)},{default:o(()=>s[18]||(s[18]=[d(" Cancel ")])),_:1}),t(T,{color:"success",variant:"tonal",onClick:C},{default:o(()=>s[19]||(s[19]=[d(" Create ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Ue,{modelValue:v.value.show,"onUpdate:modelValue":s[5]||(s[5]=b=>v.value.show=b),color:v.value.color,timeout:"3000",location:"top"},{default:o(()=>[d(V(v.value.text),1)]),_:1},8,["modelValue","color"])]),_:1}))}}),Ra=$e(ya,[["__scopeId","data-v-c9610d37"]]);export{Ra as default};
