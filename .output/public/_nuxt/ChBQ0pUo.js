import{a as z,b as Z,c as ee}from"./B2zV2hO7.js";import{Y as te,H as R,y as le,I as ne}from"./CTpYCmOx.js";import{f as ae,p as ue,af as oe,o as ie,w as D,aw as B,u as re,ah as se,ag as ce}from"./BOmTdu30.js";import{V as de}from"./BJLcRbSt.js";import{c as r,d as p,w as fe,m as n,n as y,F as h,A as ve}from"./CoKilWGJ.js";const me=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...ne({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>D(e).every(c=>c!=null&&typeof c=="object")},...Z({clearable:!0})},"VFileInput"),ke=ae()({name:"VFileInput",inheritAttrs:!1,props:me(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{attrs:M,emit:g,slots:a}=c;const{t:C}=oe(),l=ie(e,"modelValue",e.modelValue,t=>D(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:d,focus:N,blur:$}=te(e),I=r(()=>typeof e.showSize!="boolean"?e.showSize:void 0),k=r(()=>(l.value??[]).reduce((t,i)=>{let{size:s=0}=i;return t+s},0)),V=r(()=>B(k.value,I.value)),f=r(()=>(l.value??[]).map(t=>{const{name:i="",size:s=0}=t;return e.showSize?`${i} (${B(s,I.value)})`:i})),x=r(()=>{const t=l.value?.length??0;return e.showSize?C(e.counterSizeString,t,V.value):C(e.counterString,t)}),b=p(),S=p(),u=p(),j=r(()=>d.value||e.active),F=r(()=>["plain","underlined"].includes(e.variant));function v(){u.value!==document.activeElement&&u.value?.focus(),d.value||N()}function T(t){u.value?.click()}function E(t){g("mousedown:control",t)}function O(t){u.value?.click(),g("click:control",t)}function H(t){t.stopPropagation(),v(),ve(()=>{l.value=[],ce(e["onClick:clear"],t)})}function L(t){t.preventDefault()}function U(t){t.preventDefault(),t.dataTransfer&&(l.value=[...t.dataTransfer.files??[]])}return fe(l,t=>{(!Array.isArray(t)||!t.length)&&u.value&&(u.value.value="")}),re(()=>{const t=!!(a.counter||e.counter),i=!!(t||a.details),[s,Y]=se(M),{modelValue:pe,..._}=R.filterProps(e),q=z.filterProps(e);return n(R,y({ref:b,modelValue:e.multiple?l.value:l.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":F.value},e.class],style:e.style,"onClick:prepend":T},s,_,{centerAffix:!F.value,focused:d.value}),{...a,default:m=>{let{id:G,isDisabled:w,isDirty:P,isReadonly:A,isValid:J}=m;return n(z,y({ref:S,"prepend-icon":e.prependIcon,onMousedown:E,onClick:O,"onClick:clear":H,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},q,{id:G.value,active:j.value||P.value,dirty:P.value||e.dirty,disabled:w.value,focused:d.value,error:J.value===!1,onDragover:L,onDrop:U}),{...a,default:K=>{let{props:{class:Q,...W}}=K;return n(h,null,[n("input",y({ref:u,type:"file",readonly:A.value,disabled:w.value,multiple:e.multiple,name:e.name,onClick:o=>{o.stopPropagation(),A.value&&o.preventDefault(),v()},onChange:o=>{if(!o.target)return;const X=o.target;l.value=[...X.files??[]]},onFocus:v,onBlur:$},W,Y),null),n("div",{class:Q},[!!l.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:f.value,totalBytes:k.value,totalBytesReadable:V.value}):e.chips?f.value.map(o=>n(de,{key:o,size:"small",text:o},null)):f.value.join(", "))])])}})},details:i?m=>n(h,null,[a.details?.(m),t&&n(h,null,[n("span",null,null),n(ee,{active:!!l.value?.length,value:x.value,disabled:e.disabled},a.counter)])]):void 0})}),le({},b,S,u)}});export{ke as V};
