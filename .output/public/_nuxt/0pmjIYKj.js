import{a as H,b as I}from"./BFhaMN7O.js";import{p as T,C as A,f as E,o as R,Y as x,av as L,u as k,au as N}from"./BOmTdu30.js";import{d as w,s as h,c as o,w as p,x as C,q as M,G as B,m as U,n as q,a as z}from"./CoKilWGJ.js";import{aG as F}from"./CTpYCmOx.js";const G=T({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Y(l){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:v}=S;let d=0,s=0;const e=w(null),u=h(0),r=h(0),m=h(0),g=h(!1),n=h(!1),c=o(()=>Number(l.scrollThreshold)),y=o(()=>A((c.value-u.value)/c.value||0)),f=()=>{const t=e.value;if(!t||v&&!v.value)return;d=u.value,u.value="window"in t?t.pageYOffset:t.scrollTop;const i=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(s!==i){s=i;return}n.value=u.value<d,m.value=Math.abs(u.value-c.value)};return p(n,()=>{r.value=r.value||u.value}),p(g,()=>{r.value=0}),C(()=>{p(()=>l.scrollTarget,t=>{const i=t?document.querySelector(t):window;i&&i!==e.value&&(e.value?.removeEventListener("scroll",f),e.value=i,e.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),M(()=>{e.value?.removeEventListener("scroll",f)}),v&&p(v,f,{immediate:!0}),{scrollThreshold:c,currentScroll:u,currentThreshold:m,isScrollActive:g,scrollRatio:y,isScrollingUp:n,savedScroll:r}}const O=T({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:l=>["top","bottom"].includes(l)},...I(),...N(),...G(),height:{type:[Number,String],default:64}},"VAppBar"),K=E()({name:"VAppBar",props:O(),emits:{"update:modelValue":l=>!0},setup(l,S){let{slots:v}=S;const d=w(),s=R(l,"modelValue"),e=o(()=>{const a=new Set(l.scrollBehavior?.split(" ")??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),u=o(()=>{const a=e.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!s.value}),{currentScroll:r,scrollThreshold:m,isScrollingUp:g,scrollRatio:n}=Y(l,{canScroll:u}),c=o(()=>e.value.hide||e.value.fullyHide),y=o(()=>l.collapse||e.value.collapse&&(e.value.inverted?n.value>0:n.value===0)),f=o(()=>l.flat||e.value.fullyHide&&!s.value||e.value.elevate&&(e.value.inverted?r.value>0:r.value===0)),t=o(()=>e.value.fadeImage?e.value.inverted?1-n.value:n.value:void 0),i=o(()=>{if(e.value.hide&&e.value.inverted)return 0;const a=d.value?.contentHeight??0,b=d.value?.extensionHeight??0;return c.value?r.value<m.value||e.value.fullyHide?a+b:a:a+b});x(o(()=>!!l.scrollBehavior),()=>{z(()=>{c.value?e.value.inverted?s.value=r.value>m.value:s.value=g.value||r.value<m.value:s.value=!0})});const{ssrBootStyles:V}=F(),{layoutItemStyles:P}=L({id:l.name,order:o(()=>parseInt(l.order,10)),position:B(l,"location"),layoutSize:i,elementSize:h(void 0),active:s,absolute:B(l,"absolute")});return k(()=>{const a=H.filterProps(l);return U(H,q({ref:d,class:["v-app-bar",{"v-app-bar--bottom":l.location==="bottom"},l.class],style:[{...P.value,"--v-toolbar-image-opacity":t.value,height:void 0,...V.value},l.style]},a,{collapse:y.value,flat:f.value}),v)}),{}}});export{K as V};
