globalThis.__timing__.logStart('Load chunks/build/VSelect');import { shallowRef, watch, computed, ref, inject, provide, mergeProps, createVNode, Fragment, watchEffect, onScopeDispose, nextTick, toRef, createTextVNode } from 'vue';
import { a as ae, F as Fe } from './VTextField.mjs';
import { f as y, y as y$1, C, a4 as t, h as y$2, ah as o, aO as o$1, aP as ge, as as d$1, o as o$2, aQ as it, H as P, az as M$1, aR as Re, aS as Y, aT as D, aU as B, aV as F$1, A as i, n as o$3, a2 as $, aW as H, Z, aX as G, aY as a, j as x, r, X, l as f, aI as v, aZ as E, a_ as W, a$ as C$1, aa as T, b0 as q$1, b1 as M$2, ap as A, L, Q as Ke, R as ot, e as $$1, b2 as N, b3 as de, b4 as le } from './server.mjs';
import { F as F$2 } from './VCheckboxBtn.mjs';
import { j as je } from './VChip.mjs';

function d(l,s){const t=shallowRef(false);let i;function c(e){cancelAnimationFrame(i),t.value=true,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{t.value=false;});});}async function u(){await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>{if(t.value){const o=watch(t,()=>{o(),e();});}else e();});}async function m(e){if(e.key==="Tab"&&s.value?.focus(),!["PageDown","PageUp","Home","End"].includes(e.key))return;const o=l.value?.$el;if(!o)return;(e.key==="Home"||e.key==="End")&&o.scrollTo({top:e.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await u();const a=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(e.key==="PageDown"||e.key==="Home"){const r=o.getBoundingClientRect().top;for(const n of a)if(n.getBoundingClientRect().top>=r){n.focus();break}}else {const r=o.getBoundingClientRect().bottom;for(const n of [...a].reverse())if(n.getBoundingClientRect().bottom<=r){n.focus();break}}}return {onScrollPassive:c,onKeydown:m}}

const q=y$1({id:String,submenu:Boolean,...M$1(Re({closeDelay:250,closeOnContentClick:true,locationStrategy:"connected",location:void 0,openDelay:300,scrim:false,scrollStrategy:"reposition",transition:{component:Y}}),["absolute"])},"VMenu"),ie=y()({name:"VMenu",props:q(),emits:{"update:modelValue":t=>true},setup(t$1,k){let{slots:d}=k;const o$3=C(t$1,"modelValue"),{scopeId:E}=t(),{isRtl:a}=y$2(),m=o(),c=computed(()=>t$1.id||`v-menu-${m}`),n=ref(),l=inject(o$1,null),i=shallowRef(new Set);provide(o$1,{register(){i.value.add(m);},unregister(){i.value.delete(m);},closeParents(e){setTimeout(()=>{!i.value.size&&!t$1.persistent&&(e==null||n.value?.contentEl&&!ge(e,n.value.contentEl))&&(o$3.value=false,l?.closeParents());},40);}}),watch(o$3,e=>{e?l?.register():l?.unregister();},{immediate:true});function P$1(e){l?.closeParents(e);}function V(e){if(!t$1.disabled)if(e.key==="Tab"||e.key==="Enter"&&!t$1.closeOnContentClick){if(e.key==="Enter"&&(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement&&e.target.closest("form")))return;e.key==="Enter"&&e.preventDefault(),B(F$1(n.value?.contentEl,false),e.shiftKey?"prev":"next",u=>u.tabIndex>=0)||(o$3.value=false,n.value?.activatorEl?.focus());}else t$1.submenu&&e.key===(a.value?"ArrowRight":"ArrowLeft")&&(o$3.value=false,n.value?.activatorEl?.focus());}function v(e){if(t$1.disabled)return;const r=n.value?.contentEl;r&&o$3.value?e.key==="ArrowDown"?(e.preventDefault(),e.stopImmediatePropagation(),D(r,"next")):e.key==="ArrowUp"?(e.preventDefault(),e.stopImmediatePropagation(),D(r,"prev")):t$1.submenu&&(e.key===(a.value?"ArrowRight":"ArrowLeft")?o$3.value=false:e.key===(a.value?"ArrowLeft":"ArrowRight")&&(e.preventDefault(),D(r,"first"))):(t$1.submenu?e.key===(a.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(e.key))&&(o$3.value=true,e.preventDefault(),setTimeout(()=>setTimeout(()=>v(e))));}const b=computed(()=>mergeProps({"aria-haspopup":"menu","aria-expanded":String(o$3.value),"aria-controls":c.value,onKeydown:v},t$1.activatorProps));return o$2(()=>{const e=it.filterProps(t$1);return createVNode(it,mergeProps({ref:n,id:c.value,class:["v-menu",t$1.class],style:t$1.style},e,{modelValue:o$3.value,"onUpdate:modelValue":r=>o$3.value=r,absolute:true,activatorProps:b.value,location:t$1.location??(t$1.submenu?"end":"bottom"),"onClick:outside":P$1,onKeydown:V},E),{activator:d.activator,default:function(){for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return createVNode(P,{root:"VMenu"},{default:()=>[d.default?.(...u)]})}})}),d$1({id:c,Î¨openChildren:i},n)}});

const g=y$1({renderless:Boolean,...o$3()},"VVirtualScrollItem"),k$1=y()({name:"VVirtualScrollItem",inheritAttrs:false,props:g(),emits:{"update:height":e=>true},setup(e,s){let{attrs:m,emit:i$1,slots:t}=s;const{resizeRef:r,contentRect:a}=i();watch(()=>a.value?.height,o=>{o!=null&&i$1("update:height",o);}),o$2(()=>e.renderless?createVNode(Fragment,null,[t.default?.({itemRef:r})]):createVNode("div",mergeProps({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},m),[t.default?.()]));}});

const ne=-1,oe=1,k=100,he=y$1({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function me(f,l){const i$1=$(),n=shallowRef(0);watchEffect(()=>{n.value=parseFloat(f.itemHeight||0);});const a=shallowRef(0),o=shallowRef(Math.ceil((parseInt(f.height)||i$1.height.value)/(n.value||16))||1),g=shallowRef(0),x=shallowRef(0),r=ref(),h=ref();let O=0;const{resizeRef:q,contentRect:B}=i();watchEffect(()=>{q.value=r.value;});const w=computed(()=>r.value===(void 0).documentElement?i$1.height.value:B.value?.height||parseInt(f.height)||0),U=computed(()=>!!(r.value&&h.value&&w.value&&n.value));let b=Array.from({length:l.value.length}),m=Array.from({length:l.value.length});const R=shallowRef(0);let z=-1;function _(e){return b[e]||n.value}const y=H(()=>{const e=performance.now();m[0]=0;const t=l.value.length;for(let u=1;u<=t-1;u++)m[u]=(m[u-1]||0)+_(u-1);R.value=Math.max(R.value,performance.now()-e);},R),j=watch(U,e=>{e&&(j(),O=h.value.offsetTop,y.immediate(),v(),~z&&nextTick(()=>{}));});onScopeDispose(()=>{y.clear();});function C(e,t){const u=b[e],c=n.value;n.value=c?Math.min(n.value,t):t,(u!==t||c!==n.value)&&(b[e]=t,y());}function s(e){return e=Z(e,0,l.value.length-1),m[e]||0}function D(e){return re(m,e)}let I=0,d=0,S=0;watch(w,(e,t)=>{t&&(v(),e<t&&requestAnimationFrame(()=>{d=0,v();}));});let M=-1;function W(){if(!r.value||!h.value)return;const e=r.value.scrollTop,t=performance.now();t-S>500?(d=Math.sign(e-I),O=h.value.offsetTop):d=e-I,I=e,S=t,(void 0).clearTimeout(M),M=(void 0).setTimeout(P,500),v();}function P(){!r.value||!h.value||(d=0,S=0,(void 0).clearTimeout(M),v());}let V=-1;function v(){cancelAnimationFrame(V),V=requestAnimationFrame(X);}function X(){if(!r.value||!w.value)return;const e=I-O,t=Math.sign(d),u=Math.max(0,e-k),c=Z(D(u),0,l.value.length),K=e+w.value+k,T=Z(D(K)+1,c+1,l.value.length);if((t!==ne||c<a.value)&&(t!==oe||T>o.value)){const L=s(a.value)-s(c),Q=s(T)-s(o.value);Math.max(L,Q)>k?(a.value=c,o.value=T):(c<=0&&(a.value=c),T>=l.value.length&&(o.value=T));}g.value=s(a.value),x.value=s(l.value.length)-s(o.value);}function G$1(e){const t=s(e);!r.value||e&&!t?z=e:r.value.scrollTop=t;}const J=computed(()=>l.value.slice(a.value,o.value).map((e,t)=>({raw:e,index:t+a.value,key:G(e)&&"value"in e?e.value:t+a.value})));return watch(l,()=>{b=Array.from({length:l.value.length}),m=Array.from({length:l.value.length}),y.immediate(),v();},{deep:true}),{calculateVisibleItems:v,containerRef:r,markerRef:h,computedItems:J,paddingTop:g,paddingBottom:x,scrollToIndex:G$1,handleScroll:W,handleScrollend:P,handleItemResize:C}}function re(f,l){let i=f.length-1,n=0,a=0,o=null,g=-1;if(f[i]<l)return i;for(;n<=i;)if(a=n+i>>1,o=f[a],o>l)i=a-1;else if(o<l)g=a,n=a+1;else return o===l?a:n;return g}

const F=y$1({items:{type:Array,default:()=>[]},renderless:Boolean,...he(),...o$3(),...f()},"VVirtualScroll"),M=y()({name:"VVirtualScroll",props:F(),setup(e,u){let{slots:v}=u;a("VVirtualScroll");const{dimensionStyles:p}=x(e),{calculateVisibleItems:f,containerRef:t,markerRef:d,handleScroll:a$1,handleScrollend:i,handleItemResize:g,scrollToIndex:V,paddingTop:m,paddingBottom:c,computedItems:S}=me(e,toRef(e,"items"));return r(()=>e.renderless,()=>{function n(){const l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:false)?"addEventListener":"removeEventListener";t.value===(void 0).documentElement?((void 0)[l]("scroll",a$1,{passive:true}),(void 0)[l]("scrollend",i)):(t.value?.[l]("scroll",a$1,{passive:true}),t.value?.[l]("scrollend",i));}onScopeDispose(n);}),o$2(()=>{const n=S.value.map(o=>createVNode(k$1,{key:o.key,renderless:e.renderless,"onUpdate:height":l=>g(o.index,l)},{default:l=>v.default?.({item:o.raw,index:o.index,...l})}));return e.renderless?createVNode(Fragment,null,[createVNode("div",{ref:d,class:"v-virtual-scroll__spacer",style:{paddingTop:X(m.value)}},null),n,createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:X(c.value)}},null)]):createVNode("div",{ref:t,class:["v-virtual-scroll",e.class],onScrollPassive:a$1,onScrollend:i,style:[p.value,e.style]},[createVNode("div",{ref:d,class:"v-virtual-scroll__container",style:{paddingTop:X(m.value),paddingBottom:X(c.value)}},[n])])}),{calculateVisibleItems:f,scrollToIndex:V}}});

const Be=y$1({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:A,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...M$2({itemChildren:false})},"Select"),Ee=y$1({...Be(),...M$1(ae({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...T({transition:{component:Y}})},"VSelect"),at=y()({name:"VSelect",props:Ee(),emits:{"update:focused":e=>true,"update:modelValue":e=>true,"update:menu":e=>true},setup(e,q){let{slots:u}=q;const{t:S}=v(),f=ref(),B=ref(),E$1=ref(),D=C(e,"menu"),i=computed({get:()=>D.value,set:t=>{D.value&&!t&&B.value?.Î¨openChildren.size||(D.value=t);}}),{items:x,transformIn:W$1,transformOut:Y}=E(e),l=C(e,"modelValue",[],t=>W$1(t===null?[null]:q$1(t)),t=>{const n=Y(t);return e.multiple?n:n[0]??null}),G=computed(()=>typeof e.counterValue=="function"?e.counterValue(l.value):typeof e.counterValue=="number"?e.counterValue:l.value.length),I=W(e),J=computed(()=>l.value.map(t=>t.value)),p=shallowRef(false),O=computed(()=>i.value?e.closeText:e.openText);let T="",R;const V=computed(()=>e.hideSelected?x.value.filter(t=>!l.value.some(n=>(e.valueComparator||C$1)(n,t))):x.value),F=computed(()=>e.hideNoData&&!V.value.length||I.isReadonly.value||I.isDisabled.value),Q=computed(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),g=ref(),X=d(g,f);function Z(t){e.openOnClear&&(i.value=true);}function ee(){F.value||(i.value=!i.value);}function te(t){de(t)&&M$1(t);}function M$1(t){if(!t.key||I.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(i.value=true),["Escape","Tab"].includes(t.key)&&(i.value=false),t.key==="Home"?g.value?.focus("first"):t.key==="End"&&g.value?.focus("last");const n=1e3;if(!de(t))return;const s=performance.now();s-R>n&&(T=""),T+=t.key.toLowerCase(),R=s;const m=x.value.find(v=>v.title.toLowerCase().startsWith(T));m!==void 0&&(l.value=[m],V.value.indexOf(m));}function b(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:true;if(!t.props.disabled)if(e.multiple){const s=l.value.findIndex(v=>(e.valueComparator||C$1)(v.value,t.value)),m=n??!~s;if(~s){const v=m?[...l.value,t]:[...l.value];v.splice(s,1),l.value=v;}else m&&(l.value=[...l.value,t]);}else {const s=n!==false;l.value=s?[t]:[],nextTick(()=>{i.value=false;});}}function le$1(t){g.value?.$el.contains(t.relatedTarget)||(i.value=false);}function oe(){e.eager&&E$1.value?.calculateVisibleItems();}function ne(){p.value&&f.value?.focus();}function ae(t){p.value=true;}function ue(t){if(t==null)l.value=[];else if(le(f.value)||le(f.value));else f.value&&(f.value.value="");}return watch(i,()=>{!e.hideSelected&&i.value&&l.value.length&&V.value.findIndex(t=>l.value.some(n=>(e.valueComparator||C$1)(n.value,t.value)));}),watch(()=>e.items,(t,n)=>{i.value||p.value&&!n.length&&t.length&&(i.value=true);}),o$2(()=>{const t=!!(e.chips||u.chip),n=!!(!e.hideNoData||V.value.length||u["prepend-item"]||u["append-item"]||u["no-data"]),s=l.value.length>0,m=Fe.filterProps(e),v=s||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return createVNode(Fe,mergeProps({ref:f},m,{modelValue:l.value.map(o=>o.props.value).join(", "),"onUpdate:modelValue":ue,focused:p.value,"onUpdate:focused":o=>p.value=o,validationValue:l.externalValue,counterValue:G.value,dirty:s,class:["v-select",{"v-select--active-menu":i.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:true,"v-select--selected":l.value.length,"v-select--selection-slot":!!u.selection},e.class],style:e.style,inputmode:"none",placeholder:v,"onClick:clear":Z,"onMousedown:control":ee,onBlur:le$1,onKeydown:M$1,"aria-label":S(O.value),title:S(O.value)}),{...u,default:()=>createVNode(Fragment,null,[createVNode(ie,mergeProps({ref:B,modelValue:i.value,"onUpdate:modelValue":o=>i.value=o,activator:"parent",contentClass:"v-select__content",disabled:F.value,eager:e.eager,maxHeight:310,openOnClick:false,closeOnContentClick:false,transition:e.transition,onAfterEnter:oe,onAfterLeave:ne},Q.value),{default:()=>[n&&createVNode(Ke,mergeProps({ref:g,selected:J.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:o=>o.preventDefault(),onKeydown:te,onFocusin:ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},X,e.listProps),{default:()=>[u["prepend-item"]?.(),!V.value.length&&!e.hideNoData&&(u["no-data"]?.()??createVNode(ot,{key:"no-data",title:S(e.noDataText)},null)),createVNode(M,{ref:E$1,renderless:true,items:V.value},{default:o=>{let{item:r,index:d,itemRef:P}=o;const C=mergeProps(r.props,{ref:P,key:r.value,onClick:()=>b(r,null)});return u.item?.({item:r,index:d,props:C})??createVNode(ot,mergeProps(C,{role:"option"}),{prepend:k=>{let{isSelected:c}=k;return createVNode(Fragment,null,[e.multiple&&!e.hideSelected?createVNode(F$2,{key:r.value,modelValue:c,ripple:false,tabindex:"-1"},null):void 0,r.props.prependAvatar&&createVNode($$1,{image:r.props.prependAvatar},null),r.props.prependIcon&&createVNode(L,{icon:r.props.prependIcon},null)])}})}}),u["append-item"]?.()]})]}),l.value.map((o,r)=>{function d(c){c.stopPropagation(),c.preventDefault(),b(o,false);}const P$1={"onClick:close":d,onKeydown(c){c.key!=="Enter"&&c.key!==" "||(c.preventDefault(),c.stopPropagation(),d(c));},onMousedown(c){c.preventDefault(),c.stopPropagation();},modelValue:true,"onUpdate:modelValue":void 0},C=t?!!u.chip:!!u.selection,k=C?N(t?u.chip({item:o,index:r,props:P$1}):u.selection({item:o,index:r})):void 0;if(!(C&&!k))return createVNode("div",{key:o.value,class:"v-select__selection"},[t?u.chip?createVNode(P,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:o.title}}},{default:()=>[k]}):createVNode(je,mergeProps({key:"chip",closable:e.closableChips,size:"small",text:o.title,disabled:o.props.disabled},P$1),null):k??createVNode("span",{class:"v-select__selection-text"},[o.title,e.multiple&&r<l.value.length-1&&createVNode("span",{class:"v-select__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var o=arguments.length,r=new Array(o),d=0;d<o;d++)r[d]=arguments[d];return createVNode(Fragment,null,[u["append-inner"]?.(...r),e.menuIcon?createVNode(L,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),d$1({isFocused:p,menu:i,select:b},f)}});

export { Be as B, M, at as a, d, ie as i };;globalThis.__timing__.logEnd('Load chunks/build/VSelect');
