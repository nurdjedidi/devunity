globalThis.__timing__.logStart('Load chunks/build/VFileInput');import { computed, ref, watch, createVNode, mergeProps, Fragment, nextTick } from 'vue';
import { J as Je, N, x as xe } from './VTextField.mjs';
import { f as y, y as y$1, aI as v, C, af as F, bL as te, as as d, o, au as W, av as ve, b0 as q, at as O, aw as se } from './server.mjs';
import { j as je } from './VChip.mjs';

const me=y$1({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:false,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...O({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>q(e).every(s=>s!=null&&typeof s=="object")},...xe({clearable:true})},"VFileInput"),Re=y()({name:"VFileInput",inheritAttrs:false,props:me(),emits:{"click:control":e=>true,"mousedown:control":e=>true,"update:focused":e=>true,"update:modelValue":e=>true},setup(e,s){let{attrs:M,emit:g,slots:o$1}=s;const{t:C$1}=v(),l=C(e,"modelValue",e.modelValue,t=>q(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:d$1,focus:N$1,blur:$}=F(e),k=computed(()=>typeof e.showSize!="boolean"?e.showSize:void 0),I=computed(()=>(l.value??[]).reduce((t,a)=>{let{size:c=0}=a;return t+c},0)),V=computed(()=>te(I.value,k.value)),f=computed(()=>(l.value??[]).map(t=>{const{name:a="",size:c=0}=t;return e.showSize?`${a} (${te(c,k.value)})`:a})),x=computed(()=>{const t=l.value?.length??0;return e.showSize?C$1(e.counterSizeString,t,V.value):C$1(e.counterString,t)}),b=ref(),S=ref(),i=ref(),j=computed(()=>d$1.value||e.active),F$1=computed(()=>["plain","underlined"].includes(e.variant));function v$1(){i.value!==(void 0).activeElement&&i.value?.focus(),d$1.value||N$1();}function T(t){i.value?.click();}function E(t){g("mousedown:control",t);}function O(t){i.value?.click(),g("click:control",t);}function L(t){t.stopPropagation(),v$1(),nextTick(()=>{l.value=[],se(e["onClick:clear"],t);});}function U(t){t.preventDefault();}function _(t){t.preventDefault(),t.dataTransfer&&(l.value=[...t.dataTransfer.files??[]]);}return watch(l,t=>{(!Array.isArray(t)||!t.length)&&i.value&&(i.value.value="");}),o(()=>{const t=!!(o$1.counter||e.counter),a=!!(t||o$1.details),[c,q]=W(M),{modelValue:pe,...G}=ve.filterProps(e),H=Je.filterProps(e);return createVNode(ve,mergeProps({ref:b,modelValue:e.multiple?l.value:l.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":F$1.value},e.class],style:e.style,"onClick:prepend":T},c,G,{centerAffix:!F$1.value,focused:d$1.value}),{...o$1,default:m=>{let{id:J,isDisabled:P,isDirty:z,isReadonly:A,isValid:K}=m;return createVNode(Je,mergeProps({ref:S,"prepend-icon":e.prependIcon,onMousedown:E,onClick:O,"onClick:clear":L,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},H,{id:J.value,active:j.value||z.value,dirty:z.value||e.dirty,disabled:P.value,focused:d$1.value,error:K.value===false,onDragover:U,onDrop:_}),{...o$1,default:Q=>{let{props:{class:W,...X}}=Q;return createVNode(Fragment,null,[createVNode("input",mergeProps({ref:i,type:"file",readonly:A.value,disabled:P.value,multiple:e.multiple,name:e.name,onClick:u=>{u.stopPropagation(),A.value&&u.preventDefault(),v$1();},onChange:u=>{if(!u.target)return;const Y=u.target;l.value=[...Y.files??[]];},onFocus:v$1,onBlur:$},X,q),null),createVNode("div",{class:W},[!!l.value?.length&&!e.hideInput&&(o$1.selection?o$1.selection({fileNames:f.value,totalBytes:I.value,totalBytesReadable:V.value}):e.chips?f.value.map(u=>createVNode(je,{key:u,size:"small",text:u},null)):f.value.join(", "))])])}})},details:a?m=>createVNode(Fragment,null,[o$1.details?.(m),t&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(N,{active:!!l.value?.length,value:x.value,disabled:e.disabled},o$1.counter)])]):void 0})}),d({},b,S,i)}});

export { Re as R };;globalThis.__timing__.logEnd('Load chunks/build/VFileInput');
